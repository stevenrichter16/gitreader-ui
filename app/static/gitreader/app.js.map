{
  "version": 3,
  "sources": ["app.ts"],
  "sourcesContent": ["type NarrationMode = 'hook' | 'summary' | 'key_lines' | 'connections' | 'next';\n\ntype TocMode = 'story' | 'tree' | 'routes';\n\ntype TourMode = 'story' | 'teacher' | 'expert';\n\ntype SymbolKind = 'file' | 'folder' | 'class' | 'function' | 'method' | 'external' | 'blueprint';\n\ntype EdgeKind = 'imports' | 'calls' | 'inherits' | 'contains' | 'blueprint';\n\ntype EdgeConfidence = 'high' | 'medium' | 'low';\n\ninterface SourceLocation {\n    path: string;\n    start_line: number;\n    end_line: number;\n    start_col: number;\n    end_col: number;\n}\n\ninterface SymbolNode {\n    id: string;\n    name: string;\n    kind: SymbolKind;\n    summary: string;\n    signature?: string;\n    docstring?: string;\n    location?: SourceLocation;\n    module?: string;\n}\n\ninterface FoldRange {\n    id: string;\n    name: string;\n    kind: SymbolKind;\n    start: number;\n    end: number;\n}\n\ninterface GraphEdge {\n    source: string;\n    target: string;\n    kind: EdgeKind;\n    confidence: EdgeConfidence;\n}\n\ninterface ChapterSummary {\n    id: string;\n    title: string;\n    summary: string;\n    scope?: string;\n}\n\ninterface StoryRouteInfo {\n    path: string;\n    methods: string[];\n    handler_id: string;\n    handler_name: string;\n    module: string;\n    file_path: string;\n    line: number;\n}\n\ninterface StoryScene {\n    id: string;\n    name: string;\n    kind: SymbolKind;\n    file_path: string;\n    line: number;\n    role: string;\n    confidence?: EdgeConfidence;\n}\n\ninterface StoryArc {\n    id: string;\n    title: string;\n    summary: string;\n    entry_id: string;\n    thread?: string;\n    thread_index?: number;\n    parent_id?: string | null;\n    related_ids?: string[];\n    route: StoryRouteInfo;\n    scenes: StoryScene[];\n    scene_count: number;\n    calls?: {\n        internal?: string[];\n        external?: string[];\n    };\n}\n\ninterface ApiWarning {\n    code: string;\n    message: string;\n    path: string;\n    line?: number;\n}\n\ninterface ApiTocResponse {\n    chapters: ChapterSummary[];\n    mode?: TocMode;\n    stats?: Record<string, number>;\n    warnings?: ApiWarning[];\n}\n\ninterface ApiGraphResponse {\n    nodes: SymbolNode[];\n    edges: GraphEdge[];\n    scope?: string;\n    stats?: Record<string, number>;\n    warnings?: ApiWarning[];\n}\n\ninterface ApiStoryResponse {\n    arcs: StoryArc[];\n    stats?: Record<string, number>;\n    warnings?: ApiWarning[];\n}\n\ninterface SymbolSnippetResponse {\n    id: string;\n    name: string;\n    kind: SymbolKind;\n    summary?: string;\n    signature?: string;\n    docstring?: string;\n    location: SourceLocation;\n    start_line: number;\n    end_line: number;\n    total_lines: number;\n    truncated: boolean;\n    section: string;\n    highlights: HighlightRange[];\n    snippet: string;\n    warnings?: ApiWarning[];\n    stats?: Record<string, number>;\n}\n\ninterface HighlightRange {\n    label: string;\n    start_line: number;\n    end_line: number;\n}\n\ninterface NarrationKeyLine {\n    line: number;\n    text: string;\n}\n\ninterface NarrationResponse {\n    mode: NarrationMode;\n    symbol_id: string;\n    symbol_name: string;\n    hook?: string;\n    summary?: string[];\n    key_lines?: NarrationKeyLine[];\n    connections?: string[];\n    next_thread?: string;\n    cached?: boolean;\n    source?: string;\n    model?: string;\n    prompt_version?: string;\n}\n\ninterface TourState {\n    repo_id: string;\n    ref: string | null;\n    subdir: string | null;\n    arc_id: string;\n    mode: TourMode;\n    step_index: number;\n    last_node_id?: string;\n    visited_node_ids?: string[];\n    branch_stack?: string[];\n    context_window?: Array<{ node_id: string; summary: string }>;\n}\n\ninterface TourRelatedNode {\n    node_id: string;\n    label: string;\n}\n\ninterface TourRelatedArc {\n    arc_id: string;\n    title: string;\n}\n\ninterface TourContextLink {\n    label: string;\n    file_path?: string;\n    line?: number;\n    node_id?: string;\n}\n\ninterface TourFocus {\n    file_path?: string;\n    start_line?: number;\n    end_line?: number;\n    node_id?: string;\n}\n\ninterface TourStep {\n    step_index: number;\n    total_steps?: number;\n    node_id: string;\n    arc_id: string;\n    arc_title?: string;\n    title: string;\n    hook: string;\n    explanation: string[];\n    why_it_matters: string;\n    concept?: string;\n    why_here?: string;\n    remember?: string;\n    next_click: string;\n    pitfall?: string;\n    confidence?: EdgeConfidence;\n    related_nodes?: TourRelatedNode[];\n    related_arcs?: TourRelatedArc[];\n    context_links?: TourContextLink[];\n    story_so_far?: string[];\n    focus?: TourFocus;\n    allowed_node_ids?: string[];\n    cached?: boolean;\n    source?: string;\n    model?: string;\n    prompt_version?: string;\n}\n\ninterface TourResponse {\n    state: TourState;\n    step: TourStep;\n    warnings?: ApiWarning[];\n}\n\ntype SnippetMode = 'body' | 'full';\n\ntype GraphLayoutMode = 'cluster' | 'layer' | 'free';\n\ninterface FileTreeNode {\n    name: string;\n    path: string;\n    isFile: boolean;\n    children: Map<string, FileTreeNode>;\n}\n\ninterface GraphView {\n    nodes: SymbolNode[];\n    edges: GraphEdge[];\n    totalNodes: number;\n    visibleNodes: number;\n    isCapped: boolean;\n}\n\ndeclare const cytoscape: any;\ndeclare const hljs: any;\n\nclass GitReaderApp {\n    private tocList: HTMLElement;\n    private codeSurface: HTMLElement;\n    private canvasGraph: HTMLElement;\n    private canvasSurface: HTMLElement;\n    private canvasOverlay: HTMLElement;\n    private narratorOutput: HTMLElement;\n    private narratorFileTree: HTMLElement;\n    private modeButtons: NodeListOf<HTMLButtonElement>;\n    private layoutButtons: NodeListOf<HTMLButtonElement>;\n    private tocModeButtons: NodeListOf<HTMLButtonElement>;\n    private snippetModeButtons: NodeListOf<HTMLButtonElement>;\n    private graphLayoutButtons: NodeListOf<HTMLButtonElement>;\n    private edgeFilterButtons: NodeListOf<HTMLButtonElement>;\n    private nodeFilterButtons: NodeListOf<HTMLButtonElement>;\n    private graphActionButtons: NodeListOf<HTMLButtonElement>;\n    private narratorToggle: HTMLButtonElement;\n    private workspace: HTMLElement;\n    private tocPill: HTMLElement;\n    private tocSubtitle: HTMLElement;\n    private graphNodeStatus: HTMLElement;\n    private graphRevealButton: HTMLButtonElement;\n    private graphTooltip: HTMLElement;\n    private narratorPane: HTMLElement;\n    private readerFileTreeButton: HTMLButtonElement;\n    private routePicker: HTMLElement;\n    private routeSelect: HTMLSelectElement;\n    private routeJump: HTMLButtonElement;\n    private tourControls: HTMLElement;\n    private tourModeSelect: HTMLSelectElement;\n    private tourStartButton: HTMLButtonElement;\n    private tourPrevButton: HTMLButtonElement;\n    private tourNextButton: HTMLButtonElement;\n    private tourEndButton: HTMLButtonElement;\n    private tourStatus: HTMLElement;\n    private repoForm: HTMLFormElement;\n    private repoInput: HTMLInputElement;\n    private localInput: HTMLInputElement;\n    private refInput: HTMLInputElement;\n    private subdirInput: HTMLInputElement;\n    private repoParams: URLSearchParams;\n    private currentMode: NarrationMode = 'hook';\n    private tocMode: TocMode = 'story';\n    private snippetMode: SnippetMode = 'body';\n    private graphLayoutMode: GraphLayoutMode = 'cluster';\n    private chapters: ChapterSummary[] = [];\n    private storyArcs: StoryArc[] = [];\n    private storyArcsById: Map<string, StoryArc> = new Map();\n    private activeStoryArc: StoryArc | null = null;\n    private tourActive = false;\n    private tourState: TourState | null = null;\n    private tourStep: TourStep | null = null;\n    private tourMode: TourMode = 'story';\n    private guidedAllowedNodeIds: Set<string> | null = null;\n    private fileTreeRoot: FileTreeNode | null = null;\n    private fileTreeFocusPath: string | null = null;\n    private readerTreeFocusPath: string | null = null;\n    private fileTreeCollapsed: Set<string> = new Set();\n    private graphNodes: SymbolNode[] = [];\n    private graphEdges: GraphEdge[] = [];\n    private nodeById: Map<string, SymbolNode> = new Map();\n    private displayNodeById: Map<string, SymbolNode> = new Map();\n    private fileNodesByPath: Map<string, SymbolNode> = new Map();\n    private snippetCache: Map<string, SymbolSnippetResponse> = new Map();\n    private graphCache: Map<string, ApiGraphResponse> = new Map();\n    private graphLoadPromises: Map<string, Promise<ApiGraphResponse>> = new Map();\n    private narratorCache: Map<string, NarrationResponse> = new Map();\n    private graphNodeCapByScope: Map<string, number> = new Map();\n    private narratorRequestToken = 0;\n    private chapterRequestToken = 0;\n    private graphRequestToken = 0;\n    private narratorVisible = true;\n    private graphInstance: any | null = null;\n    private graphEventsBound = false;\n    private edgeFilters: Set<EdgeKind> = new Set(['calls', 'imports', 'inherits', 'contains', 'blueprint']);\n    private showExternalNodes = true;\n    private hoveredNodeId: string | null = null;\n    private currentScope = 'full';\n    private currentChapterId: string | null = null;\n    private focusedNodeId: string | null = null;\n    private currentSymbol: SymbolNode | null = null;\n    private currentSnippetText = '';\n    private currentSnippetStartLine = 1;\n    private clusterExpanded: Set<string> = new Set();\n    private tocDebounceTimer: number | null = null;\n    private tocDebounceDelay = 200;\n    private pendingChapterId: string | null = null;\n    private graphNodeCap = 300;\n    private graphNodeCapStep = 200;\n    private labelZoomThreshold = 0.65;\n    private labelLineLength = 18;\n    private lastTapNodeId: string | null = null;\n    private lastTapAt = 0;\n    private doubleTapDelay = 320;\n    private importModal: HTMLElement | null = null;\n    private importModalMessage: HTMLElement | null = null;\n    private importBreadcrumbs: string[] = [];\n    private foldedSymbolIds: Set<string> = new Set();\n    private currentFoldRanges: Map<string, FoldRange> = new Map();\n    private currentFoldPath: string | null = null;\n    private pendingSymbol: SymbolNode | null = null;\n    private pendingSnippet: SymbolSnippetResponse | null = null;\n\n    constructor() {\n        this.tocList = this.getElement('toc-list');\n        this.codeSurface = this.getElement('code-surface');\n        this.canvasGraph = this.getElement('canvas-graph');\n        this.canvasSurface = this.getElement('canvas-surface');\n        this.canvasOverlay = this.getElement('canvas-overlay');\n        this.narratorOutput = this.getElement('narrator-output');\n        this.narratorFileTree = this.getElement('narrator-file-tree');\n        this.modeButtons = document.querySelectorAll<HTMLButtonElement>('.mode-btn');\n        this.layoutButtons = document.querySelectorAll<HTMLButtonElement>('.nav-btn[data-layout]');\n        this.tocModeButtons = document.querySelectorAll<HTMLButtonElement>('.nav-btn[data-toc-mode]');\n        this.snippetModeButtons = document.querySelectorAll<HTMLButtonElement>('[data-snippet-mode]');\n        this.graphLayoutButtons = document.querySelectorAll<HTMLButtonElement>('[data-layout-action]');\n        this.edgeFilterButtons = document.querySelectorAll<HTMLButtonElement>('[data-edge-filter]');\n        this.nodeFilterButtons = document.querySelectorAll<HTMLButtonElement>('[data-node-filter]');\n        this.graphActionButtons = document.querySelectorAll<HTMLButtonElement>('[data-graph-action]');\n        this.narratorToggle = this.getElement('narrator-toggle') as HTMLButtonElement;\n        this.workspace = this.getElement('workspace');\n        this.tocPill = this.getElement('toc-pill');\n        this.tocSubtitle = this.getElement('toc-subtitle');\n        this.graphNodeStatus = this.getElement('graph-node-status');\n        this.graphRevealButton = this.getElement('graph-reveal') as HTMLButtonElement;\n        this.graphTooltip = this.getElement('graph-tooltip');\n        this.narratorPane = this.getElement('narrator');\n        this.readerFileTreeButton = this.getElement('reader-file-tree') as HTMLButtonElement;\n        this.routePicker = this.getElement('route-picker');\n        this.routeSelect = this.getElement('route-select') as HTMLSelectElement;\n        this.routeJump = this.getElement('route-jump') as HTMLButtonElement;\n        this.tourControls = this.getElement('tour-controls');\n        this.tourModeSelect = this.getElement('tour-mode') as HTMLSelectElement;\n        this.tourStartButton = this.getElement('tour-start') as HTMLButtonElement;\n        this.tourPrevButton = this.getElement('tour-prev') as HTMLButtonElement;\n        this.tourNextButton = this.getElement('tour-next') as HTMLButtonElement;\n        this.tourEndButton = this.getElement('tour-end') as HTMLButtonElement;\n        this.tourStatus = this.getElement('tour-status');\n        this.tourModeSelect.value = this.tourMode;\n        this.graphRevealButton.disabled = true;\n        this.routeSelect.disabled = true;\n        this.routeJump.disabled = true;\n        this.tourPrevButton.disabled = true;\n        this.tourNextButton.disabled = true;\n        this.tourEndButton.disabled = true;\n        this.repoForm = this.getElement('repo-picker') as HTMLFormElement;\n        this.repoInput = this.getElement('repo-input') as HTMLInputElement;\n        this.localInput = this.getElement('local-input') as HTMLInputElement;\n        this.refInput = this.getElement('ref-input') as HTMLInputElement;\n        this.subdirInput = this.getElement('subdir-input') as HTMLInputElement;\n        this.repoParams = this.buildRepoParams();\n        this.syncRepoInputsFromParams();\n    }\n\n    init(): void {\n        this.renderLoadingState();\n        this.loadGraphPreferences();\n        this.bindEvents();\n        this.updateNarratorToggle();\n        this.updateTourControls();\n        this.updateSnippetModeUi();\n        this.updateGraphControls();\n        this.loadData().catch((error) => {\n            const message = error instanceof Error ? error.message : 'Failed to load data.';\n            this.renderErrorState(message);\n        });\n    }\n\n    private getElement(id: string): HTMLElement {\n        const element = document.getElementById(id);\n        if (!element) {\n            throw new Error(`Missing element: ${id}`);\n        }\n        return element;\n    }\n\n    private async loadData(): Promise<void> {\n        await this.loadToc(this.tocMode);\n        const defaultChapterId = this.chapters.length > 0 ? this.chapters[0].id : '';\n        await this.loadChapter(defaultChapterId);\n    }\n\n    private async fetchJson<T>(url: string, init?: RequestInit): Promise<T> {\n        const headers = new Headers(init?.headers);\n        headers.set('Accept', 'application/json');\n        const response = await fetch(url, {\n            ...init,\n            headers,\n        });\n        if (!response.ok) {\n            throw new Error(`Request failed: ${response.status}`);\n        }\n        return response.json() as Promise<T>;\n    }\n\n    private buildRepoParams(): URLSearchParams {\n        const params = new URLSearchParams(window.location.search);\n        const allowed = new URLSearchParams();\n        const repoValue = params.get('repo');\n        const localValue = params.get('local');\n        if (repoValue) {\n            allowed.set('repo', repoValue);\n        } else if (localValue) {\n            allowed.set('local', localValue);\n        }\n        const refValue = params.get('ref');\n        if (refValue) {\n            allowed.set('ref', refValue);\n        }\n        const subdirValue = params.get('subdir');\n        if (subdirValue) {\n            allowed.set('subdir', subdirValue);\n        }\n        return allowed;\n    }\n\n    private buildApiUrl(path: string, extra?: Record<string, string | null | undefined>): string {\n        const params = new URLSearchParams(this.repoParams.toString());\n        if (extra) {\n            Object.keys(extra).forEach((key) => {\n                const value = extra[key];\n                if (value !== undefined && value !== null && value !== '') {\n                    params.set(key, value);\n                }\n            });\n        }\n        const query = params.toString();\n        return query ? `${path}?${query}` : path;\n    }\n\n    private syncRepoInputsFromParams(): void {\n        this.repoInput.value = this.repoParams.get('repo') ?? '';\n        this.localInput.value = this.repoParams.get('local') ?? '';\n        this.refInput.value = this.repoParams.get('ref') ?? '';\n        this.subdirInput.value = this.repoParams.get('subdir') ?? '';\n    }\n\n    private applyRepoSelection(): void {\n        const repoValue = this.repoInput.value.trim();\n        const localValue = this.localInput.value.trim();\n        const refValue = this.refInput.value.trim();\n        const subdirValue = this.subdirInput.value.trim();\n        const params = new URLSearchParams();\n        if (repoValue) {\n            params.set('repo', repoValue);\n        } else if (localValue) {\n            params.set('local', localValue);\n        }\n        if (refValue) {\n            params.set('ref', refValue);\n        }\n        if (subdirValue) {\n            params.set('subdir', subdirValue);\n        }\n        const query = params.toString();\n        window.location.search = query ? `?${query}` : '';\n    }\n\n    private renderLoadingState(): void {\n        this.tocList.innerHTML = '<li class=\"toc-item\"><div class=\"toc-title\">Loading chapters</div><p class=\"toc-summary\">Scanning repository...</p></li>';\n        this.codeSurface.innerHTML = '<article class=\"code-card\"><h3>Loading symbols...</h3><p>Fetching graph data.</p></article>';\n        this.setCanvasOverlay('Preparing nodes and edges...', true);\n        this.narratorOutput.innerHTML = '<p class=\"eyebrow\">Narrator</p><h3>Loading</h3><p>Gathering the first clues.</p>';\n    }\n\n    private renderErrorState(message: string): void {\n        this.tocList.innerHTML = `<li class=\"toc-item\"><div class=\"toc-title\">Failed to load</div><p class=\"toc-summary\">${this.escapeHtml(message)}</p></li>`;\n        this.codeSurface.innerHTML = `<article class=\"code-card\"><h3>Unable to load</h3><p>${this.escapeHtml(message)}</p></article>`;\n        this.setCanvasOverlay(message, true);\n        this.narratorOutput.innerHTML = `<p class=\"eyebrow\">Narrator</p><h3>Paused</h3><p>${this.escapeHtml(message)}</p>`;\n    }\n\n    private bindEvents(): void {\n        this.tocList.addEventListener('click', (event) => {\n            const target = (event.target as HTMLElement).closest<HTMLLIElement>('.toc-item');\n            if (!target) {\n                return;\n            }\n            const chapterId = target.dataset.chapterId;\n            if (chapterId) {\n                if (this.tourActive) {\n                    if (this.tocMode === 'routes') {\n                        void this.setTocMode('routes', chapterId);\n                    }\n                    return;\n                }\n                this.scheduleChapterLoad(chapterId);\n            }\n        });\n\n        this.tocModeButtons.forEach((button) => {\n            button.addEventListener('click', () => {\n                const mode = button.dataset.tocMode as TocMode | undefined;\n                if (mode) {\n                    void this.setTocMode(mode);\n                }\n            });\n        });\n\n        this.snippetModeButtons.forEach((button) => {\n            button.addEventListener('click', () => {\n                const mode = button.dataset.snippetMode as SnippetMode | undefined;\n                if (mode) {\n                    void this.setSnippetMode(mode);\n                }\n            });\n        });\n\n        this.readerFileTreeButton.addEventListener('click', () => {\n            this.showReaderFileTreeForCurrent();\n        });\n\n        this.graphLayoutButtons.forEach((button) => {\n            button.addEventListener('click', () => {\n                const layout = button.dataset.layoutAction as GraphLayoutMode | undefined;\n                if (layout) {\n                    this.setGraphLayoutMode(layout);\n                }\n            });\n        });\n\n        this.edgeFilterButtons.forEach((button) => {\n            button.addEventListener('click', () => {\n                const filter = button.dataset.edgeFilter as EdgeKind | undefined;\n                if (filter) {\n                    this.toggleEdgeFilter(filter);\n                }\n            });\n        });\n\n        this.nodeFilterButtons.forEach((button) => {\n            button.addEventListener('click', () => {\n                const filter = button.dataset.nodeFilter;\n                if (filter === 'external') {\n                    this.showExternalNodes = !this.showExternalNodes;\n                    this.updateGraphControls();\n                    if (this.graphLayoutMode === 'cluster') {\n                        this.refreshGraphView();\n                    } else {\n                        this.applyGraphFilters();\n                    }\n                }\n            });\n        });\n\n        this.graphActionButtons.forEach((button) => {\n            button.addEventListener('click', () => {\n                const action = button.dataset.graphAction;\n                if (action === 'focus') {\n                    this.focusOnSelected();\n                } else if (action === 'reset') {\n                    this.resetGraphFocus();\n                } else if (action === 'reveal') {\n                    this.revealMoreNodes();\n                } else if (action === 'zoom-in') {\n                    this.zoomGraph(1.2);\n                } else if (action === 'zoom-out') {\n                    this.zoomGraph(0.8);\n                } else if (action === 'fit') {\n                    this.fitGraph();\n                }\n            });\n        });\n\n        this.modeButtons.forEach((button) => {\n            button.addEventListener('click', () => {\n                const mode = button.dataset.mode as NarrationMode | undefined;\n                if (mode) {\n                    this.setMode(mode);\n                }\n            });\n        });\n\n        this.tourModeSelect.addEventListener('change', () => {\n            const mode = this.tourModeSelect.value as TourMode;\n            this.tourMode = mode;\n            if (this.tourActive) {\n                void this.startTour();\n            }\n        });\n\n        this.tourStartButton.addEventListener('click', () => {\n            void this.startTour();\n        });\n\n        this.tourPrevButton.addEventListener('click', () => {\n            void this.advanceTour('prev');\n        });\n\n        this.tourNextButton.addEventListener('click', () => {\n            void this.advanceTour('next');\n        });\n\n        this.tourEndButton.addEventListener('click', () => {\n            this.endTour();\n        });\n\n        this.routeSelect.addEventListener('change', () => {\n            if (this.tourActive && this.tocMode !== 'routes') {\n                return;\n            }\n            const arcId = this.routeSelect.value;\n            if (!arcId) {\n                return;\n            }\n            void this.setTocMode('routes', arcId);\n        });\n\n        this.routeJump.addEventListener('click', () => {\n            if (this.tourActive && this.tocMode !== 'routes') {\n                return;\n            }\n            const arcId = this.routeSelect.value;\n            if (!arcId) {\n                return;\n            }\n            void this.setTocMode('routes', arcId);\n        });\n\n        this.layoutButtons.forEach((button) => {\n            button.addEventListener('click', () => {\n                const layout = button.dataset.layout;\n                if (layout) {\n                    this.setLayout(layout);\n                }\n            });\n        });\n\n        this.narratorToggle.addEventListener('click', () => {\n            this.narratorVisible = !this.narratorVisible;\n            this.narratorPane.classList.toggle('is-hidden', !this.narratorVisible);\n            this.updateNarratorToggle();\n            this.refreshGraphViewport();\n        });\n\n        this.codeSurface.addEventListener('click', (event) => {\n            const target = event.target as HTMLElement;\n            const foldToggle = target.closest<HTMLElement>('[data-fold-toggle]');\n            if (foldToggle) {\n                const foldId = foldToggle.dataset.foldToggle;\n                if (foldId) {\n                    this.toggleFold(foldId);\n                }\n                return;\n            }\n            const breadcrumbTarget = target.closest<HTMLElement>('[data-breadcrumb-path]');\n            if (breadcrumbTarget) {\n                const path = breadcrumbTarget.dataset.breadcrumbPath;\n                if (path) {\n                    this.navigateBreadcrumb(path);\n                }\n                return;\n            }\n            const treeToggle = target.closest<HTMLElement>('[data-tree-toggle]');\n            if (treeToggle) {\n                const path = treeToggle.dataset.treeToggle;\n                if (path) {\n                    this.toggleFileTreePath(path);\n                }\n                return;\n            }\n            const actionTarget = target.closest<HTMLElement>('[data-reader-action]');\n            if (actionTarget) {\n                const action = actionTarget.dataset.readerAction;\n                if (action === 'copy') {\n                    void this.copySnippet();\n                } else if (action === 'jump') {\n                    this.jumpToInputLine();\n                }\n                return;\n            }\n            const importTarget = target.closest<HTMLElement>('[data-import-name]');\n            if (importTarget) {\n                const importName = importTarget.dataset.importName;\n                if (importName) {\n                    if (this.isModifierClick(event as MouseEvent)) {\n                        this.handleImportJump(importName, importTarget.closest<HTMLElement>('.code-line'));\n                    } else {\n                        this.highlightImportUsage(importName);\n                    }\n                }\n                return;\n            }\n            const importLine = target.closest<HTMLElement>('.code-line[data-imports]');\n            if (importLine) {\n                const imports = (importLine.dataset.imports || '').split(',').map((value) => value.trim()).filter(Boolean);\n                if (imports.length > 0) {\n                    if (this.isModifierClick(event as MouseEvent)) {\n                        this.handleImportJump(imports[0], importLine);\n                    } else {\n                        this.highlightImportUsage(imports[0]);\n                    }\n                }\n                return;\n            }\n            if (this.handleDefinitionJump(event as MouseEvent, target)) {\n                return;\n            }\n        });\n\n        this.codeSurface.addEventListener('keydown', (event) => {\n            const target = event.target as HTMLElement;\n            if (event.key === 'Enter' && target.matches('[data-line-input]')) {\n                event.preventDefault();\n                this.jumpToInputLine();\n            }\n        });\n\n        this.narratorOutput.addEventListener('click', (event) => {\n            const target = (event.target as HTMLElement).closest<HTMLElement>('[data-arc-id]');\n            if (!target) {\n                return;\n            }\n            const arcId = target.dataset.arcId;\n            if (arcId) {\n                void this.setTocMode('routes', arcId);\n            }\n        });\n\n        this.narratorOutput.addEventListener('click', (event) => {\n            const target = (event.target as HTMLElement).closest<HTMLElement>('[data-tour-node]');\n            if (!target) {\n                return;\n            }\n            const nodeId = target.dataset.tourNode;\n            if (nodeId) {\n                void this.advanceTour('jump', nodeId);\n            }\n        });\n\n        this.narratorOutput.addEventListener('click', (event) => {\n            const target = (event.target as HTMLElement).closest<HTMLElement>('[data-tour-arc]');\n            if (!target) {\n                return;\n            }\n            const arcId = target.dataset.tourArc;\n            if (arcId) {\n                void this.advanceTour('branch', undefined, arcId);\n            }\n        });\n\n        this.narratorOutput.addEventListener('click', (event) => {\n            const target = (event.target as HTMLElement).closest<HTMLElement>('[data-context-link]');\n            if (!target) {\n                return;\n            }\n            const nodeId = target.dataset.contextNode;\n            const filePath = target.dataset.contextFile;\n            const line = target.dataset.contextLine ? Number(target.dataset.contextLine) : undefined;\n            this.handleContextLink(nodeId, filePath, line);\n        });\n\n        this.narratorFileTree.addEventListener('click', (event) => {\n            const target = (event.target as HTMLElement).closest<HTMLElement>('[data-tree-toggle]');\n            if (!target) {\n                return;\n            }\n            const path = target.dataset.treeToggle;\n            if (path) {\n                this.toggleFileTreePath(path);\n            }\n        });\n\n        this.repoForm.addEventListener('submit', (event) => {\n            event.preventDefault();\n            this.applyRepoSelection();\n        });\n    }\n\n    private scheduleChapterLoad(chapterId: string): void {\n        this.pendingChapterId = chapterId;\n        this.setActiveToc(chapterId);\n        if (this.tocDebounceTimer !== null) {\n            window.clearTimeout(this.tocDebounceTimer);\n        }\n        this.tocDebounceTimer = window.setTimeout(() => {\n            this.tocDebounceTimer = null;\n            if (this.pendingChapterId) {\n                void this.loadChapter(this.pendingChapterId);\n            }\n        }, this.tocDebounceDelay);\n    }\n\n    private async setTocMode(mode: TocMode, targetChapterId?: string): Promise<void> {\n        if (this.tocMode === mode) {\n            if (targetChapterId) {\n                if (this.tourActive) {\n                    this.currentChapterId = targetChapterId;\n                    this.setActiveToc(targetChapterId);\n                    this.resetNarratorForTocMode(mode, targetChapterId);\n                    this.updateTourControls();\n                    return;\n                }\n                await this.loadChapter(targetChapterId);\n                return;\n            }\n            if (this.tourActive) {\n                this.resetNarratorForTocMode(mode);\n                this.updateTourControls();\n            }\n            return;\n        }\n        this.tocList.innerHTML = '<li class=\"toc-item\"><div class=\"toc-title\">Loading chapters</div><p class=\"toc-summary\">Switching TOC view...</p></li>';\n        await this.loadToc(mode);\n        const defaultChapterId = targetChapterId ?? (this.chapters.length > 0 ? this.chapters[0].id : '');\n        if (this.tourActive) {\n            this.currentChapterId = defaultChapterId;\n            this.setActiveToc(defaultChapterId);\n            this.resetNarratorForTocMode(mode, defaultChapterId);\n            this.updateTourControls();\n            return;\n        }\n        await this.loadChapter(defaultChapterId);\n    }\n\n    private resetNarratorForTocMode(mode: TocMode, targetChapterId?: string): void {\n        if (!this.tourActive) {\n            return;\n        }\n        if (mode === 'routes') {\n            const arcId = targetChapterId || this.currentChapterId || this.routeSelect.value || '';\n            const arc = arcId ? this.storyArcsById.get(arcId) : undefined;\n            if (arc) {\n                this.activeStoryArc = arc;\n                this.renderStoryArc(arc);\n                return;\n            }\n            this.activeStoryArc = null;\n            if (arcId) {\n                this.renderStoryArcMissing();\n                return;\n            }\n            this.renderStoryArcEmpty();\n            return;\n        }\n        this.activeStoryArc = null;\n        if (mode === 'tree') {\n            this.renderFileTreeNarrator();\n            return;\n        }\n        if (this.tourStep) {\n            this.renderTourStep(this.tourStep);\n        }\n    }\n\n    private async loadToc(mode: TocMode): Promise<void> {\n        if (mode === 'routes') {\n            await this.loadRouteToc();\n            return;\n        }\n        const tocData = await this.fetchJson<ApiTocResponse>(\n            this.buildApiUrl('/gitreader/api/toc', { mode }),\n        );\n        this.chapters = Array.isArray(tocData.chapters) ? tocData.chapters : [];\n        this.tocMode = tocData.mode ?? mode;\n        this.activeStoryArc = null;\n        this.updateTocModeUi();\n        this.renderToc();\n    }\n\n    private async loadRouteToc(): Promise<void> {\n        const storyData = await this.fetchJson<ApiStoryResponse>(\n            this.buildApiUrl('/gitreader/api/story'),\n        );\n        this.storyArcs = Array.isArray(storyData.arcs) ? storyData.arcs : [];\n        this.storyArcsById = new Map(this.storyArcs.map((arc) => [arc.id, arc]));\n        this.chapters = this.storyArcs.map((arc) => this.buildArcChapter(arc));\n        this.tocMode = 'routes';\n        this.activeStoryArc = null;\n        this.updateTocModeUi();\n        this.renderToc();\n        this.populateRoutePicker(this.storyArcs);\n    }\n\n    private updateTocModeUi(): void {\n        this.tocModeButtons.forEach((button) => {\n            button.classList.toggle('is-active', button.dataset.tocMode === this.tocMode);\n        });\n        const isStory = this.tocMode === 'story';\n        const isRoutes = this.tocMode === 'routes';\n        if (isRoutes) {\n            this.tocPill.textContent = 'routes';\n            this.tocSubtitle.textContent = 'Trace Flask routes into their primary flow.';\n        } else {\n            this.tocPill.textContent = isStory ? 'story' : 'file tree';\n            this.tocSubtitle.textContent = isStory\n                ? 'Follow the story arc of the repository.'\n                : 'Browse the repository by folder.';\n        }\n        this.routePicker.classList.toggle('is-hidden', !isRoutes);\n    }\n\n    private buildArcChapter(arc: StoryArc): ChapterSummary {\n        const handler = arc.route?.handler_name ? `Handler ${arc.route.handler_name}` : '';\n        const summary = [handler, arc.summary].filter(Boolean).join(' - ') || 'Route arc';\n        return {\n            id: arc.id,\n            title: this.formatArcTitle(arc) || handler || 'Route',\n            summary,\n        };\n    }\n\n    private populateRoutePicker(arcs: StoryArc[]): void {\n        this.routeSelect.innerHTML = '';\n        const placeholder = document.createElement('option');\n        placeholder.value = '';\n        placeholder.textContent = arcs.length > 0 ? 'Select a route' : 'No routes found';\n        this.routeSelect.appendChild(placeholder);\n        arcs.forEach((arc) => {\n            const option = document.createElement('option');\n            option.value = arc.id;\n            option.textContent = this.formatArcOptionLabel(arc);\n            this.routeSelect.appendChild(option);\n        });\n        const hasRoutes = arcs.length > 0;\n        this.routeSelect.disabled = !hasRoutes;\n        this.routeJump.disabled = !hasRoutes;\n        if (!hasRoutes) {\n            this.routeSelect.value = '';\n        } else if (this.currentChapterId && this.storyArcsById.has(this.currentChapterId)) {\n            this.routeSelect.value = this.currentChapterId;\n        }\n    }\n\n    private formatArcOptionLabel(arc: StoryArc): string {\n        const routeLabel = this.formatArcTitle(arc);\n        const handler = arc.route?.handler_name ? ` - ${arc.route.handler_name}` : '';\n        return `${routeLabel}${handler}`.trim();\n    }\n\n    private formatRouteLabel(arc: StoryArc): string {\n        if (arc.title) {\n            return arc.title;\n        }\n        const methods = arc.route?.methods?.length ? arc.route.methods.join('|') : 'ANY';\n        const target = arc.route?.path || arc.route?.handler_name || 'route';\n        return `${methods} ${target}`.trim();\n    }\n\n    private renderToc(): void {\n        this.tocList.innerHTML = '';\n        if (this.chapters.length === 0) {\n            this.tocList.innerHTML = '<li class=\"toc-item\"><div class=\"toc-title\">No chapters yet</div><p class=\"toc-summary\">Scan another repository.</p></li>';\n            return;\n        }\n        this.chapters.forEach((chapter) => {\n            const item = document.createElement('li');\n            item.className = 'toc-item';\n            item.dataset.chapterId = chapter.id;\n            if (chapter.scope) {\n                item.dataset.scope = chapter.scope;\n            }\n            item.innerHTML = `\n                <div class=\"toc-title\">${this.escapeHtml(chapter.title)}</div>\n                <p class=\"toc-summary\">${this.escapeHtml(chapter.summary)}</p>\n            `;\n            this.tocList.appendChild(item);\n        });\n        this.applyGuidedToc();\n    }\n\n    private async loadChapter(chapterId: string): Promise<void> {\n        if (this.tocMode === 'routes') {\n            await this.loadStoryArc(chapterId);\n            return;\n        }\n        if (this.tourActive) {\n            return;\n        }\n        const requestToken = ++this.chapterRequestToken;\n        this.currentChapterId = chapterId;\n        this.setActiveToc(chapterId);\n        this.activeStoryArc = null;\n        const chapter = this.chapters.find((entry) => entry.id === chapterId);\n        const scope = chapter?.scope ?? this.getScopeForChapter(chapterId);\n        this.focusedNodeId = null;\n        await this.loadGraphForScope(scope);\n        if (requestToken !== this.chapterRequestToken) {\n            return;\n        }\n        const nodes = this.filterNodesForChapter(chapterId);\n        const edges = this.filterEdgesForNodes(nodes);\n        const graphView = this.buildGraphView(nodes, edges, scope);\n        const focus = this.pickFocusNode(graphView.nodes);\n        this.renderGraph(graphView.nodes, graphView.edges);\n        this.updateGraphNodeStatus(graphView);\n        this.loadSymbolSnippet(focus).catch(() => {\n            this.renderCode(focus);\n            void this.updateNarrator(focus);\n        });\n    }\n\n    private async loadStoryArc(arcId: string): Promise<void> {\n        const requestToken = ++this.chapterRequestToken;\n        this.currentChapterId = arcId;\n        this.setActiveToc(arcId);\n        this.activeStoryArc = null;\n        if (!arcId) {\n            this.renderStoryArcEmpty();\n            return;\n        }\n        if (this.tourActive) {\n            return;\n        }\n        let arc = this.storyArcsById.get(arcId);\n        if (!arc) {\n            const response = await this.fetchJson<ApiStoryResponse>(\n                this.buildApiUrl('/gitreader/api/story', { id: arcId }),\n            );\n            arc = Array.isArray(response.arcs) ? response.arcs[0] : undefined;\n        }\n        if (requestToken !== this.chapterRequestToken) {\n            return;\n        }\n        if (!arc) {\n            this.renderStoryArcMissing();\n            return;\n        }\n        this.activeStoryArc = arc;\n        this.syncRoutePickerSelection(arcId);\n        this.focusedNodeId = arc.entry_id;\n        await this.loadGraphForScope('full');\n        if (requestToken !== this.chapterRequestToken) {\n            return;\n        }\n        const nodes = this.graphNodes;\n        const edges = this.filterEdgesForNodes(nodes);\n        const graphView = this.buildGraphView(nodes, edges, 'full');\n        this.renderGraph(graphView.nodes, graphView.edges);\n        this.updateGraphNodeStatus(graphView);\n        const entryNode = this.nodeById.get(arc.entry_id) ?? this.pickFocusNode(graphView.nodes);\n        if (entryNode) {\n            if (this.graphInstance) {\n                this.graphInstance.$('node:selected').unselect();\n                const element = this.graphInstance.$id(entryNode.id);\n                if (element && typeof element.select === 'function') {\n                    element.select();\n                }\n            }\n            try {\n                await this.loadSymbolSnippet(entryNode, false);\n            } catch {\n                this.renderCode(entryNode);\n            }\n        }\n        this.renderStoryArc(arc);\n    }\n\n    private getScopeForChapter(chapterId: string): string {\n        if (chapterId && (chapterId.startsWith('group:') || chapterId.startsWith('story:'))) {\n            return chapterId;\n        }\n        return 'full';\n    }\n\n    private async loadGraphForScope(scope: string): Promise<void> {\n        if (this.currentScope === scope && this.graphNodes.length > 0) {\n            return;\n        }\n        const requestToken = ++this.graphRequestToken;\n        this.currentScope = scope;\n        const cached = this.graphCache.get(scope);\n        if (cached) {\n            this.setGraphData(cached);\n            return;\n        }\n        let graphPromise = this.graphLoadPromises.get(scope);\n        if (!graphPromise) {\n            graphPromise = this.fetchJson<ApiGraphResponse>(\n                this.buildApiUrl('/gitreader/api/graph', scope && scope !== 'full' ? { scope } : undefined),\n            );\n            this.graphLoadPromises.set(scope, graphPromise);\n        }\n        const graphData = await graphPromise;\n        this.graphLoadPromises.delete(scope);\n        if (requestToken !== this.graphRequestToken) {\n            return;\n        }\n        this.graphCache.set(scope, graphData);\n        this.setGraphData(graphData);\n    }\n\n    private getNodeCapForScope(scope: string, totalNodes: number): number {\n        let cap = this.graphNodeCapByScope.get(scope);\n        if (cap === undefined) {\n            cap = Math.min(this.graphNodeCap, totalNodes);\n            this.graphNodeCapByScope.set(scope, cap);\n        } else if (cap > totalNodes) {\n            cap = totalNodes;\n            this.graphNodeCapByScope.set(scope, cap);\n        }\n        return cap;\n    }\n\n    private buildGraphView(nodes: SymbolNode[], edges: GraphEdge[], scope: string): GraphView {\n        if (this.graphLayoutMode === 'cluster') {\n            return this.buildClusterView(nodes, edges);\n        }\n        const totalNodes = nodes.length;\n        const cap = this.getNodeCapForScope(scope, totalNodes);\n        if (cap >= totalNodes) {\n            return {\n                nodes,\n                edges,\n                totalNodes,\n                visibleNodes: totalNodes,\n                isCapped: false,\n            };\n        }\n        const nodeMap = new Map(nodes.map((node) => [node.id, node]));\n        const degree = new Map<string, number>();\n        edges.forEach((edge) => {\n            if (nodeMap.has(edge.source)) {\n                degree.set(edge.source, (degree.get(edge.source) ?? 0) + 1);\n            }\n            if (nodeMap.has(edge.target)) {\n                degree.set(edge.target, (degree.get(edge.target) ?? 0) + 1);\n            }\n        });\n        const keepIds = new Set<string>();\n        const selectedNodeId = this.getSelectedGraphNodeId();\n        if (selectedNodeId && nodeMap.has(selectedNodeId)) {\n            keepIds.add(selectedNodeId);\n        }\n        if (this.currentSymbol && nodeMap.has(this.currentSymbol.id)) {\n            keepIds.add(this.currentSymbol.id);\n            const fileNode = this.getFileNodeForSymbol(this.currentSymbol);\n            if (fileNode && nodeMap.has(fileNode.id)) {\n                keepIds.add(fileNode.id);\n            }\n        }\n        if (this.focusedNodeId && nodeMap.has(this.focusedNodeId)) {\n            keepIds.add(this.focusedNodeId);\n        }\n        const kindWeight: Partial<Record<SymbolKind, number>> = {\n            function: 0,\n            method: 1,\n            class: 2,\n            file: 3,\n            blueprint: 4,\n            external: 5,\n        };\n        const sorted = nodes.slice().sort((a, b) => {\n            const aDegree = degree.get(a.id) ?? 0;\n            const bDegree = degree.get(b.id) ?? 0;\n            if (aDegree !== bDegree) {\n                return bDegree - aDegree;\n            }\n            const aWeight = kindWeight[a.kind] ?? 10;\n            const bWeight = kindWeight[b.kind] ?? 10;\n            if (aWeight !== bWeight) {\n                return aWeight - bWeight;\n            }\n            return a.name.localeCompare(b.name);\n        });\n        const targetSize = Math.max(cap, keepIds.size);\n        const selectedNodes: SymbolNode[] = [];\n        sorted.forEach((node) => {\n            if (keepIds.has(node.id)) {\n                selectedNodes.push(node);\n            }\n        });\n        for (const node of sorted) {\n            if (selectedNodes.length >= targetSize) {\n                break;\n            }\n            if (keepIds.has(node.id)) {\n                continue;\n            }\n            selectedNodes.push(node);\n        }\n        const selectedIds = new Set(selectedNodes.map((node) => node.id));\n        const trimmedEdges = edges.filter((edge) => selectedIds.has(edge.source) && selectedIds.has(edge.target));\n        return {\n            nodes: selectedNodes,\n            edges: trimmedEdges,\n            totalNodes,\n            visibleNodes: selectedNodes.length,\n            isCapped: totalNodes > selectedNodes.length,\n        };\n    }\n\n    private buildClusterView(nodes: SymbolNode[], edges: GraphEdge[]): GraphView {\n        const totalNodes = nodes.length;\n        const fileNodes = nodes.filter((node) => node.kind === 'file' && node.location?.path);\n        if (fileNodes.length === 0) {\n            return {\n                nodes,\n                edges,\n                totalNodes,\n                visibleNodes: nodes.length,\n                isCapped: false,\n            };\n        }\n        const fileTree = this.buildFileTreeFromNodes(fileNodes);\n        const pathToFileNode = new Map<string, SymbolNode>();\n        const filePathById = new Map<string, string>();\n        fileNodes.forEach((node) => {\n            const normalized = this.normalizePath(node.location?.path || '');\n            if (!normalized) {\n                return;\n            }\n            pathToFileNode.set(normalized, node);\n            filePathById.set(node.id, normalized);\n        });\n        const symbolsByFile = new Map<string, SymbolNode[]>();\n        nodes.forEach((node) => {\n            if (node.kind === 'file' || node.kind === 'external' || !node.location?.path) {\n                return;\n            }\n            const normalized = this.normalizePath(node.location.path);\n            const list = symbolsByFile.get(normalized) ?? [];\n            list.push(node);\n            symbolsByFile.set(normalized, list);\n        });\n        const visibleNodes: SymbolNode[] = [];\n        const visibleNodeIds = new Set<string>();\n        const visibleFileIds = new Set<string>();\n        const folderEdges: GraphEdge[] = [];\n        const addNode = (node: SymbolNode) => {\n            if (visibleNodeIds.has(node.id)) {\n                return;\n            }\n            visibleNodes.push(node);\n            visibleNodeIds.add(node.id);\n        };\n        const addFolderEdge = (source: string, target: string) => {\n            folderEdges.push({\n                source,\n                target,\n                kind: 'contains',\n                confidence: 'low',\n            });\n        };\n        const visitTree = (treeNode: FileTreeNode, parentFolderId: string | null) => {\n            const entries = Array.from(treeNode.children.values());\n            entries.sort((a, b) => {\n                if (a.isFile !== b.isFile) {\n                    return a.isFile ? 1 : -1;\n                }\n                return a.name.localeCompare(b.name);\n            });\n            entries.forEach((child) => {\n                if (child.isFile) {\n                    const fileNode = pathToFileNode.get(child.path);\n                    if (!fileNode) {\n                        return;\n                    }\n                    addNode(fileNode);\n                    visibleFileIds.add(fileNode.id);\n                    if (parentFolderId) {\n                        addFolderEdge(parentFolderId, fileNode.id);\n                    }\n                    return;\n                }\n                const folderId = this.getFolderClusterId(child.path);\n                const fileCount = this.countFilesInTree(child);\n                const folderNode: SymbolNode = {\n                    id: folderId,\n                    name: `(${fileCount} files) ${child.name}`,\n                    kind: 'folder',\n                    summary: '',\n                    location: {\n                        path: child.path,\n                        start_line: 0,\n                        end_line: 0,\n                        start_col: 0,\n                        end_col: 0,\n                    },\n                };\n                addNode(folderNode);\n                if (parentFolderId) {\n                    addFolderEdge(parentFolderId, folderId);\n                }\n                if (this.clusterExpanded.has(folderId)) {\n                    visitTree(child, folderId);\n                }\n            });\n        };\n        visitTree(fileTree, null);\n\n        if (this.showExternalNodes) {\n            nodes.forEach((node) => {\n                if (node.kind === 'external') {\n                    addNode(node);\n                }\n            });\n        }\n\n        visibleFileIds.forEach((fileId) => {\n            if (!this.clusterExpanded.has(fileId)) {\n                return;\n            }\n            const path = filePathById.get(fileId);\n            if (!path) {\n                return;\n            }\n            const children = symbolsByFile.get(path);\n            if (!children) {\n                return;\n            }\n            children.forEach((child) => addNode(child));\n        });\n\n        const nodeMap = new Map(nodes.map((node) => [node.id, node]));\n        const edgeMap = new Map<string, GraphEdge>();\n        const confidenceRank: Record<EdgeConfidence, number> = { low: 0, medium: 1, high: 2 };\n        const addEdge = (source: string, target: string, kind: EdgeKind, confidence: EdgeConfidence) => {\n            const key = `${source}:${target}:${kind}`;\n            const existing = edgeMap.get(key);\n            if (!existing) {\n                edgeMap.set(key, { source, target, kind, confidence });\n                return;\n            }\n            if (confidenceRank[confidence] > confidenceRank[existing.confidence]) {\n                existing.confidence = confidence;\n            }\n        };\n        const resolveRepresentative = (node: SymbolNode): string | null => {\n            if (node.kind === 'external') {\n                return this.showExternalNodes ? node.id : null;\n            }\n            const path = node.location?.path;\n            if (!path) {\n                return visibleNodeIds.has(node.id) ? node.id : null;\n            }\n            const normalized = this.normalizePath(path);\n            const fileNode = pathToFileNode.get(normalized);\n            const fileId = fileNode?.id;\n            const fileVisible = Boolean(fileId && visibleNodeIds.has(fileId));\n            if (node.kind === 'file') {\n                if (fileVisible && fileId) {\n                    return fileId;\n                }\n                const folderId = this.findCollapsedFolderId(normalized);\n                if (folderId && visibleNodeIds.has(folderId)) {\n                    return folderId;\n                }\n                return fileId ?? null;\n            }\n            if (fileVisible && fileId) {\n                if (this.clusterExpanded.has(fileId) && visibleNodeIds.has(node.id)) {\n                    return node.id;\n                }\n                return fileId;\n            }\n            const folderId = this.findCollapsedFolderId(normalized);\n            if (folderId && visibleNodeIds.has(folderId)) {\n                return folderId;\n            }\n            return fileId ?? null;\n        };\n\n        edges.forEach((edge) => {\n            const sourceNode = nodeMap.get(edge.source);\n            const targetNode = nodeMap.get(edge.target);\n            if (!sourceNode || !targetNode) {\n                return;\n            }\n            const sourceRep = resolveRepresentative(sourceNode);\n            const targetRep = resolveRepresentative(targetNode);\n            if (!sourceRep || !targetRep || sourceRep === targetRep) {\n                return;\n            }\n            addEdge(sourceRep, targetRep, edge.kind, edge.confidence);\n        });\n        folderEdges.forEach((edge) => addEdge(edge.source, edge.target, edge.kind, edge.confidence));\n\n        return {\n            nodes: visibleNodes,\n            edges: Array.from(edgeMap.values()),\n            totalNodes,\n            visibleNodes: visibleNodes.length,\n            isCapped: false,\n        };\n    }\n\n    private updateGraphNodeStatus(graphView: GraphView): void {\n        if (graphView.totalNodes === 0) {\n            this.graphNodeStatus.textContent = '';\n            this.graphRevealButton.disabled = true;\n            return;\n        }\n        if (this.tourActive) {\n            this.graphNodeStatus.textContent = `Guided view: ${graphView.visibleNodes}/${graphView.totalNodes}`;\n            this.graphRevealButton.disabled = true;\n            this.graphRevealButton.textContent = 'Guided';\n            return;\n        }\n        if (this.graphLayoutMode === 'cluster') {\n            this.graphNodeStatus.textContent = `Cluster view: ${graphView.visibleNodes} groups from ${graphView.totalNodes}`;\n            this.graphRevealButton.disabled = true;\n            this.graphRevealButton.textContent = 'Show more';\n            return;\n        }\n        if (!graphView.isCapped) {\n            this.graphNodeStatus.textContent = `Showing ${graphView.visibleNodes} nodes`;\n            this.graphRevealButton.disabled = true;\n            this.graphRevealButton.textContent = 'Show more';\n            return;\n        }\n        this.graphNodeStatus.textContent = `Showing ${graphView.visibleNodes} of ${graphView.totalNodes}`;\n        const nextCap = Math.min(graphView.totalNodes, graphView.visibleNodes + this.graphNodeCapStep);\n        this.graphRevealButton.textContent = nextCap >= graphView.totalNodes ? 'Show all' : 'Show more';\n        this.graphRevealButton.disabled = false;\n    }\n\n    private revealMoreNodes(): void {\n        if (!this.currentChapterId) {\n            return;\n        }\n        const nodes = this.filterNodesForChapter(this.currentChapterId);\n        const total = nodes.length;\n        const cap = this.getNodeCapForScope(this.currentScope, total);\n        if (cap >= total) {\n            return;\n        }\n        const nextCap = Math.min(total, cap + this.graphNodeCapStep);\n        this.graphNodeCapByScope.set(this.currentScope, nextCap);\n        this.refreshGraphView();\n    }\n\n    private refreshGraphView(): void {\n        if (!this.currentChapterId) {\n            return;\n        }\n        const nodes = this.filterNodesForChapter(this.currentChapterId);\n        const edges = this.filterEdgesForNodes(nodes);\n        const graphView = this.buildGraphView(nodes, edges, this.currentScope);\n        this.renderGraph(graphView.nodes, graphView.edges);\n        this.updateGraphNodeStatus(graphView);\n    }\n\n    private setGraphData(graphData: ApiGraphResponse): void {\n        this.graphNodes = Array.isArray(graphData.nodes) ? graphData.nodes : [];\n        this.graphEdges = Array.isArray(graphData.edges) ? graphData.edges : [];\n        this.nodeById = new Map(this.graphNodes.map((node) => [node.id, node]));\n        this.fileNodesByPath = new Map();\n        this.graphNodes.forEach((node) => {\n            if (node.kind !== 'file' || !node.location?.path) {\n                return;\n            }\n            this.fileNodesByPath.set(this.normalizePath(node.location.path), node);\n        });\n        if (this.currentScope === 'full' || this.tourActive) {\n            this.refreshFileTree();\n        }\n    }\n\n    private async loadSymbolSnippet(symbol: SymbolNode, shouldNarrate: boolean = true): Promise<void> {\n        if (shouldNarrate) {\n            this.activeStoryArc = null;\n        }\n        if (!this.canFetchSnippet(symbol)) {\n            this.renderCode(symbol);\n            if (shouldNarrate) {\n                void this.updateNarrator(symbol);\n            }\n            return;\n        }\n        const section = this.getSnippetSection(symbol);\n        const cacheKey = `${symbol.id}:${section}`;\n        const cached = this.snippetCache.get(cacheKey);\n        if (cached) {\n            this.renderCode(symbol, cached);\n            if (shouldNarrate) {\n                void this.updateNarrator(symbol);\n            }\n            return;\n        }\n        const response = await this.fetchJson<SymbolSnippetResponse>(\n            this.buildApiUrl('/gitreader/api/symbol', { id: symbol.id, section }),\n        );\n        this.snippetCache.set(cacheKey, response);\n        this.pendingSymbol = symbol;\n        this.pendingSnippet = response;\n        this.renderCode(symbol, response);\n        if (shouldNarrate) {\n            void this.updateNarrator(symbol);\n        }\n    }\n\n    private getSnippetSection(symbol: SymbolNode): string {\n        if (this.snippetMode === 'full') {\n            return 'full';\n        }\n        if (symbol.kind === 'function' || symbol.kind === 'method' || symbol.kind === 'class') {\n            return 'body';\n        }\n        return 'full';\n    }\n\n    private canFetchSnippet(symbol: SymbolNode): boolean {\n        if (!symbol.id) {\n            return false;\n        }\n        if (symbol.kind === 'external' || symbol.kind === 'folder') {\n            return false;\n        }\n        return Boolean(symbol.location && symbol.location.path);\n    }\n\n    private filterNodesForChapter(chapterId: string): SymbolNode[] {\n        if (!chapterId || !chapterId.startsWith('group:')) {\n            return this.graphNodes;\n        }\n        const group = chapterId.slice('group:'.length);\n        const filtered = this.graphNodes.filter((node) => {\n            const path = this.getNodePath(node);\n            if (!path) {\n                return false;\n            }\n            const normalized = path.replace(/\\\\/g, '/');\n            if (group === 'root') {\n                return normalized.indexOf('/') === -1;\n            }\n            return normalized.startsWith(`${group}/`);\n        });\n        return filtered.length > 0 ? filtered : this.graphNodes;\n    }\n\n    private filterEdgesForNodes(nodes: SymbolNode[]): GraphEdge[] {\n        const allowed = new Set(nodes.map((node) => node.id));\n        return this.graphEdges.filter((edge) => allowed.has(edge.source) && allowed.has(edge.target));\n    }\n\n    private pickFocusNode(nodes: SymbolNode[]): SymbolNode {\n        if (nodes.length === 0) {\n            return this.fallbackSymbol();\n        }\n        const priority: SymbolKind[] = ['function', 'method', 'class', 'file', 'folder', 'blueprint', 'external'];\n        for (const kind of priority) {\n            const match = nodes.find((node) => node.kind === kind);\n            if (match) {\n                return match;\n            }\n        }\n        return nodes[0];\n    }\n\n    private fallbackSymbol(): SymbolNode {\n        return {\n            id: 'fallback',\n            name: 'Repository',\n            kind: 'file',\n            summary: 'Select a chapter to explore symbols.',\n        };\n    }\n\n    private getNodePath(node: SymbolNode): string | null {\n        if (node.location && node.location.path) {\n            return node.location.path;\n        }\n        return null;\n    }\n\n    private normalizePath(path: string): string {\n        return path.replace(/\\\\/g, '/');\n    }\n\n    private isReaderVisible(): boolean {\n        return this.workspace.dataset.layout !== 'canvas';\n    }\n\n    private getFolderClusterId(path: string): string {\n        return `cluster:folder:${path}`;\n    }\n\n    private findCollapsedFolderId(path: string): string | null {\n        const normalized = this.normalizePath(path);\n        const parts = normalized.split('/').filter(Boolean);\n        let current = '';\n        for (const part of parts.slice(0, -1)) {\n            current = current ? `${current}/${part}` : part;\n            const folderId = this.getFolderClusterId(current);\n            if (!this.clusterExpanded.has(folderId)) {\n                return folderId;\n            }\n        }\n        return null;\n    }\n\n    private countFilesInTree(node: FileTreeNode): number {\n        if (node.isFile) {\n            return 1;\n        }\n        let count = 0;\n        node.children.forEach((child) => {\n            count += this.countFilesInTree(child);\n        });\n        return count;\n    }\n\n    private refreshFileTree(): void {\n        if (!this.narratorFileTree) {\n            return;\n        }\n        this.fileTreeRoot = this.buildFileTreeFromNodes(this.graphNodes);\n        this.renderFileTree(this.fileTreeFocusPath);\n    }\n\n    private buildFileTreeFromNodes(nodes: SymbolNode[]): FileTreeNode {\n        const root: FileTreeNode = {\n            name: '',\n            path: '',\n            isFile: false,\n            children: new Map(),\n        };\n        nodes.forEach((node) => {\n            if (node.kind !== 'file' || !node.location?.path) {\n                return;\n            }\n            const normalized = this.normalizePath(node.location.path);\n            const parts = normalized.split('/').filter(Boolean);\n            let cursor = root;\n            let currentPath = '';\n            parts.forEach((part, index) => {\n                currentPath = currentPath ? `${currentPath}/${part}` : part;\n                const isFile = index === parts.length - 1;\n                let next = cursor.children.get(part);\n                if (!next) {\n                    next = {\n                        name: part,\n                        path: currentPath,\n                        isFile,\n                        children: new Map(),\n                    };\n                    cursor.children.set(part, next);\n                }\n                if (isFile) {\n                    next.isFile = true;\n                }\n                cursor = next;\n            });\n        });\n        return root;\n    }\n\n    private renderFileTree(focusPath?: string | null): void {\n        if (!this.narratorFileTree) {\n            return;\n        }\n        const normalizedFocus = focusPath ? this.normalizePath(focusPath) : '';\n        this.fileTreeFocusPath = normalizedFocus || null;\n        const treeHtml = this.buildFileTreeMarkup(normalizedFocus);\n        this.narratorFileTree.innerHTML = treeHtml;\n    }\n\n    private renderFileTreeNode(\n        node: FileTreeNode,\n        focusPath: string,\n        focusParentPath: string | null,\n        collapsedFocusParents: Set<string>,\n    ): string {\n        const entries = Array.from(node.children.values());\n        if (entries.length === 0) {\n            return '';\n        }\n        entries.sort((a, b) => {\n            if (a.isFile !== b.isFile) {\n                return a.isFile ? 1 : -1;\n            }\n            return a.name.localeCompare(b.name);\n        });\n        const items = entries.map((child) => {\n            const isFocus = focusPath && child.path === focusPath;\n            const isFocusFile = child.isFile && isFocus;\n            const isFocusDir = !child.isFile && isFocus;\n            const isFocusParent = !child.isFile && focusParentPath && child.path === focusParentPath;\n            if (child.isFile) {\n                return `\n                    <li class=\"file-tree-item${isFocusFile ? ' is-focus' : ''}\">\n                        <span class=\"file-tree-name\">${this.escapeHtml(child.name)}</span>\n                    </li>\n                `;\n            }\n            const isCollapsed = this.fileTreeCollapsed.has(child.path);\n            const isCollapsedFocusParent = isCollapsed && collapsedFocusParents.has(child.path);\n            const childrenHtml = this.renderFileTreeNode(\n                child,\n                focusPath,\n                focusParentPath,\n                collapsedFocusParents,\n            );\n            return `\n                <li class=\"file-tree-item is-dir${isCollapsed ? ' is-collapsed' : ''}${isFocusDir || isCollapsedFocusParent ? ' is-focus' : ''}\">\n                    <button class=\"file-tree-toggle\" type=\"button\" data-tree-toggle=\"${this.escapeHtml(child.path)}\">\n                        <span class=\"file-tree-caret\"></span>\n                        <span class=\"file-tree-name\">${this.escapeHtml(child.name)}/</span>\n                    </button>\n                    <div class=\"file-tree-children\">${childrenHtml}</div>\n                </li>\n            `;\n        });\n        return `<ul class=\"file-tree-list\">${items.join('')}</ul>`;\n    }\n\n    private buildFileTreeMarkup(focusPath?: string | null): string {\n        const normalizedFocus = focusPath ? this.normalizePath(focusPath) : '';\n        if (normalizedFocus) {\n            this.expandFileTreeForFocus(normalizedFocus);\n        }\n        if (!this.fileTreeRoot || this.fileTreeRoot.children.size === 0) {\n            return '<p class=\"file-tree-empty\">No files loaded yet.</p>';\n        }\n        const focusParentPath = this.getParentPath(normalizedFocus);\n        const collapsedFocusParents = this.getCollapsedFocusParents(normalizedFocus);\n        const treeHtml = this.renderFileTreeNode(\n            this.fileTreeRoot,\n            normalizedFocus,\n            focusParentPath,\n            collapsedFocusParents,\n        );\n        return treeHtml || '<p class=\"file-tree-empty\">No files loaded yet.</p>';\n    }\n\n    private toggleFileTreePath(path: string): void {\n        if (this.fileTreeCollapsed.has(path)) {\n            this.fileTreeCollapsed.delete(path);\n        } else {\n            this.fileTreeCollapsed.add(path);\n        }\n        this.renderFileTree(this.fileTreeFocusPath);\n        if (this.readerTreeFocusPath) {\n            this.renderReaderFileTree(this.readerTreeFocusPath);\n        }\n    }\n\n    private expandFileTreePath(path: string): void {\n        const normalized = this.normalizePath(path);\n        const parts = normalized.split('/').filter(Boolean);\n        let current = '';\n        for (const part of parts.slice(0, -1)) {\n            current = current ? `${current}/${part}` : part;\n            if (this.fileTreeCollapsed.has(current)) {\n                break;\n            }\n            this.fileTreeCollapsed.delete(current);\n        }\n    }\n\n    private expandFileTreeForFocus(path: string): void {\n        if (this.fileNodesByPath.has(path)) {\n            this.expandFileTreePath(path);\n            return;\n        }\n        this.expandFileTreeFolder(path);\n    }\n\n    private expandFileTreeFolder(path: string): void {\n        const normalized = this.normalizePath(path);\n        const parts = normalized.split('/').filter(Boolean);\n        let current = '';\n        for (const part of parts) {\n            current = current ? `${current}/${part}` : part;\n            this.fileTreeCollapsed.delete(current);\n        }\n    }\n\n    private getParentPath(path: string): string | null {\n        if (!path) {\n            return null;\n        }\n        const normalized = this.normalizePath(path);\n        const parts = normalized.split('/').filter(Boolean);\n        if (parts.length <= 1) {\n            return null;\n        }\n        return parts.slice(0, -1).join('/');\n    }\n\n    private getCollapsedFocusParents(path: string): Set<string> {\n        const collapsed = new Set<string>();\n        if (!path) {\n            return collapsed;\n        }\n        const normalized = this.normalizePath(path);\n        const parts = normalized.split('/').filter(Boolean);\n        let current = '';\n        for (const part of parts.slice(0, -1)) {\n            current = current ? `${current}/${part}` : part;\n            if (this.fileTreeCollapsed.has(current)) {\n                collapsed.add(current);\n            }\n        }\n        return collapsed;\n    }\n\n    private getFileNodeForSymbol(symbol: SymbolNode): SymbolNode | null {\n        const path = symbol.location?.path;\n        if (!path) {\n            return null;\n        }\n        return this.fileNodesByPath.get(this.normalizePath(path)) ?? null;\n    }\n\n    private isModifierClick(event?: MouseEvent): boolean {\n        if (!event) {\n            return false;\n        }\n        return Boolean(event.metaKey || event.ctrlKey);\n    }\n\n    private isFileNodeActive(fileNode: SymbolNode): boolean {\n        if (this.currentSymbol && this.currentSymbol.kind === 'file') {\n            if (this.currentSymbol.id === fileNode.id) {\n                return true;\n            }\n            const currentPath = this.currentSymbol.location?.path;\n            const filePath = fileNode.location?.path;\n            if (currentPath && filePath && this.normalizePath(currentPath) === this.normalizePath(filePath)) {\n                return true;\n            }\n        }\n        if (!this.graphInstance) {\n            return false;\n        }\n        const element = this.graphInstance.$id(fileNode.id);\n        return Boolean(element && typeof element.selected === 'function' && element.selected());\n    }\n\n    private async highlightSymbolInFile(fileNode: SymbolNode, symbol: SymbolNode): Promise<void> {\n        if (!this.currentSymbol || this.currentSymbol.id !== fileNode.id) {\n            try {\n                await this.loadSymbolSnippet(fileNode);\n            } catch {\n                this.renderCode(fileNode);\n                void this.updateNarrator(fileNode);\n            }\n        }\n        this.applyFocusHighlight(symbol);\n    }\n\n    private handleFileFocusClick(symbol: SymbolNode, event?: MouseEvent): boolean {\n        if (!this.isModifierClick(event)) {\n            return false;\n        }\n        if (symbol.kind !== 'function' && symbol.kind !== 'method') {\n            return false;\n        }\n        const fileNode = this.getFileNodeForSymbol(symbol);\n        if (!fileNode || !this.isFileNodeActive(fileNode)) {\n            return false;\n        }\n        if (this.graphInstance) {\n            this.graphInstance.$id(fileNode.id).select();\n            this.graphInstance.$id(symbol.id).select();\n        }\n        void this.highlightSymbolInFile(fileNode, symbol);\n        return true;\n    }\n\n    private handleClusterNodeToggle(symbol: SymbolNode, event?: MouseEvent): boolean {\n        if (symbol.kind === 'folder') {\n            this.toggleClusterExpansion(symbol.id);\n            return true;\n        }\n        if (symbol.kind !== 'file') {\n            return false;\n        }\n        if (this.isModifierClick(event)) {\n            return false;\n        }\n        if (!symbol.location?.path) {\n            return false;\n        }\n        if (!this.fileHasClusterChildren(symbol)) {\n            return false;\n        }\n        this.toggleClusterExpansion(symbol.id);\n        return true;\n    }\n\n    private handleClusterFolderSingleClick(symbol: SymbolNode): boolean {\n        if (symbol.kind !== 'folder') {\n            return false;\n        }\n        if (this.isReaderVisible()) {\n            const folderPath = symbol.location?.path;\n            if (folderPath) {\n                this.renderReaderFileTree(folderPath);\n                this.renderFileTree(folderPath);\n                this.renderFileTreeNarrator();\n            }\n        }\n        return true;\n    }\n\n    private toggleClusterExpansion(nodeId: string): void {\n        if (this.clusterExpanded.has(nodeId)) {\n            this.clusterExpanded.delete(nodeId);\n        } else {\n            this.clusterExpanded.add(nodeId);\n        }\n        this.refreshGraphView();\n    }\n\n    private fileHasClusterChildren(fileNode: SymbolNode): boolean {\n        const path = fileNode.location?.path;\n        if (!path) {\n            return false;\n        }\n        const normalized = this.normalizePath(path);\n        return this.graphNodes.some((node) => {\n            if (node.kind === 'file' || node.kind === 'external') {\n                return false;\n            }\n            if (!node.location?.path) {\n                return false;\n            }\n            return this.normalizePath(node.location.path) === normalized;\n        });\n    }\n\n    private applyFocusHighlight(symbol: SymbolNode): void {\n        const start = symbol.location?.start_line ?? 0;\n        const end = symbol.location?.end_line ?? start;\n        if (!start) {\n            this.setCodeStatus('Line range unavailable.');\n            return;\n        }\n        this.clearFocusHighlights();\n        let firstLine: HTMLElement | null = null;\n        let found = false;\n        for (let line = start; line <= end; line += 1) {\n            const lineEl = this.codeSurface.querySelector<HTMLElement>(`[data-line=\"${line}\"]`);\n            if (!lineEl) {\n                continue;\n            }\n            lineEl.classList.add('is-focus');\n            if (!firstLine) {\n                firstLine = lineEl;\n            }\n            found = true;\n        }\n        if (!found) {\n            this.setCodeStatus('Selection outside snippet.');\n            return;\n        }\n        this.setCodeStatus(`Highlighted ${symbol.name}.`);\n        if (firstLine) {\n            firstLine.scrollIntoView({ behavior: 'smooth', block: 'center' });\n        }\n    }\n\n    private clearFocusHighlights(): void {\n        this.codeSurface.querySelectorAll<HTMLElement>('.code-line.is-focus')\n            .forEach((line) => line.classList.remove('is-focus'));\n    }\n\n    private setActiveToc(chapterId: string): void {\n        Array.from(this.tocList.children).forEach((child) => {\n            const element = child as HTMLElement;\n            const isActive = element.dataset.chapterId === chapterId;\n            element.classList.toggle('is-active', isActive);\n        });\n        if (this.tocMode === 'routes') {\n            this.syncRoutePickerSelection(chapterId);\n        } else {\n            this.syncRoutePickerSelection('');\n        }\n    }\n\n    private syncRoutePickerSelection(arcId: string): void {\n        if (!this.storyArcsById.has(arcId)) {\n            this.routeSelect.value = '';\n            return;\n        }\n        this.routeSelect.value = arcId;\n    }\n\n    private formatLocation(location?: SourceLocation, startLine?: number, endLine?: number): string {\n        if (!location || !location.path) {\n            return 'location unknown';\n        }\n        if (startLine && startLine > 0) {\n            const endLabel = endLine && endLine !== startLine ? `-${endLine}` : '';\n            return `${location.path}:${startLine}${endLabel}`;\n        }\n        if (location.start_line) {\n            const endLabel = location.end_line && location.end_line !== location.start_line\n                ? `-${location.end_line}`\n                : '';\n            return `${location.path}:${location.start_line}${endLabel}`;\n        }\n        return location.path;\n    }\n\n    private renderCode(symbol: SymbolNode, snippet?: SymbolSnippetResponse): void {\n        const summary = snippet?.summary ?? symbol.summary ?? 'No summary yet.';\n        const signature = snippet?.signature ?? symbol.signature ?? 'signature pending';\n        const displayRange = this.getDisplayRange(symbol, snippet);\n        const locationLabel = this.formatLocation(symbol.location, displayRange.startLine, displayRange.endLine);\n        const truncationLabel = snippet?.truncated ? ' (truncated)' : '';\n        const language = this.getHighlightLanguage(symbol.location?.path);\n        const snippetHtml = this.renderSnippetLines(snippet, language);\n        const revealLabel = snippet?.section === 'body' ? 'Show body' : 'Show code';\n        const codeClass = this.hasHighlightSupport() && language ? `hljs language-${language}` : '';\n        const breadcrumbHtml = this.renderImportBreadcrumbs(symbol.location?.path);\n        this.currentSymbol = symbol;\n        this.pendingSymbol = symbol;\n        this.pendingSnippet = snippet ?? null;\n        this.readerTreeFocusPath = null;\n        this.currentSnippetText = snippet?.snippet ?? '';\n        this.currentSnippetStartLine = snippet?.start_line ?? symbol.location?.start_line ?? 1;\n        this.codeSurface.innerHTML = `\n            <article class=\"code-card\">\n                <div class=\"code-meta\">\n                    <span>${this.escapeHtml(symbol.kind.toUpperCase())}</span>\n                    <span>${this.escapeHtml(locationLabel)}${this.escapeHtml(truncationLabel)}</span>\n                </div>\n                ${breadcrumbHtml}\n                <div class=\"code-actions\">\n                    <button class=\"ghost-btn\" data-reader-action=\"copy\">Copy snippet</button>\n                    <div class=\"jump-control\">\n                        <label for=\"line-jump\">Line</label>\n                        <input id=\"line-jump\" type=\"number\" min=\"1\" placeholder=\"Line\" data-line-input>\n                        <button class=\"ghost-btn\" data-reader-action=\"jump\">Go</button>\n                    </div>\n                    <span class=\"code-status\" data-code-status></span>\n                </div>\n                <div>\n                    <h3>${this.escapeHtml(symbol.name)}</h3>\n                    <p>${this.escapeHtml(summary)}</p>\n                </div>\n                <div class=\"code-signature\">${this.escapeHtml(signature)}</div>\n                <details class=\"code-details\" open>\n                    <summary>${revealLabel}</summary>\n                    <pre><code class=\"${codeClass}\">${snippetHtml}</code></pre>\n                </details>\n            </article>\n        `;\n        this.applyGuidedCodeFocus();\n        this.decorateImportLines(snippet, language);\n        this.applyFoldControls(symbol);\n        this.updateReaderControls();\n    }\n\n    private decorateImportLines(snippet?: SymbolSnippetResponse, language?: string): void {\n        if (!snippet?.snippet || !this.currentSymbol || this.currentSymbol.kind !== 'file') {\n            return;\n        }\n        this.clearImportUsageHighlights();\n        const raw = snippet.snippet.replace(/\\n$/, '');\n        if (!raw) {\n            return;\n        }\n        const lines = raw.split('\\n');\n        const startLine = snippet.start_line ?? 1;\n        const isJsFamily = language === 'javascript' || language === 'typescript' || language === 'tsx';\n        if (isJsFamily) {\n            const blocks = this.findJSImportBlocks(lines);\n            if (blocks.length > 0) {\n                blocks.forEach((block) => {\n                    const normalized = block.text.replace(/\\s+/g, ' ').trim();\n                    const importNames = this.extractImportNames(normalized, language);\n                    if (importNames.length === 0) {\n                        return;\n                    }\n                    for (let index = block.start; index <= block.end; index += 1) {\n                        const lineText = lines[index];\n                        const lineImports = this.filterImportNamesForLine(lineText, importNames);\n                        if (lineImports.length === 0) {\n                            continue;\n                        }\n                        const lineNumber = startLine + index;\n                        const lineEl = this.codeSurface.querySelector<HTMLElement>(`[data-line=\"${lineNumber}\"]`);\n                        if (!lineEl) {\n                            continue;\n                        }\n                        lineEl.dataset.imports = lineImports.join(',');\n                        lineEl.dataset.importStatement = normalized;\n                        this.decorateImportLine(lineEl, lineImports);\n                    }\n                });\n                return;\n            }\n        }\n        lines.forEach((lineText, index) => {\n            const importNames = this.extractImportNames(lineText, language);\n            if (importNames.length === 0) {\n                return;\n            }\n            const lineNumber = startLine + index;\n            const lineEl = this.codeSurface.querySelector<HTMLElement>(`[data-line=\"${lineNumber}\"]`);\n            if (!lineEl) {\n                return;\n            }\n            lineEl.dataset.imports = importNames.join(',');\n            this.decorateImportLine(lineEl, importNames);\n        });\n    }\n\n    private decorateImportLine(lineEl: HTMLElement, importNames: string[]): void {\n        if (importNames.length === 0) {\n            return;\n        }\n        const escaped = importNames.map((name) => this.escapeRegex(name));\n        const matcher = new RegExp(`\\\\b(${escaped.join('|')})\\\\b`, 'g');\n        const walker = document.createTreeWalker(lineEl, NodeFilter.SHOW_TEXT, {\n            acceptNode: (node) => {\n                if (!node.textContent || !matcher.test(node.textContent)) {\n                    matcher.lastIndex = 0;\n                    return NodeFilter.FILTER_REJECT;\n                }\n                matcher.lastIndex = 0;\n                const parent = node.parentElement;\n                if (!parent || parent.closest('.line-no')) {\n                    return NodeFilter.FILTER_REJECT;\n                }\n                if (parent.closest('.code-import')) {\n                    return NodeFilter.FILTER_REJECT;\n                }\n                return NodeFilter.FILTER_ACCEPT;\n            },\n        });\n        const textNodes: Text[] = [];\n        while (walker.nextNode()) {\n            textNodes.push(walker.currentNode as Text);\n        }\n        textNodes.forEach((textNode) => {\n            const text = textNode.textContent ?? '';\n            const fragment = document.createDocumentFragment();\n            let lastIndex = 0;\n            let match = matcher.exec(text);\n            while (match) {\n                const start = match.index;\n                const end = start + match[0].length;\n                if (start > lastIndex) {\n                    fragment.append(text.slice(lastIndex, start));\n                }\n                const button = document.createElement('button');\n                button.type = 'button';\n                button.className = 'code-import';\n                button.dataset.importName = match[0];\n                button.textContent = match[0];\n                fragment.append(button);\n                lastIndex = end;\n                match = matcher.exec(text);\n            }\n            matcher.lastIndex = 0;\n            if (lastIndex < text.length) {\n                fragment.append(text.slice(lastIndex));\n            }\n            textNode.parentNode?.replaceChild(fragment, textNode);\n        });\n    }\n\n    private updateImportBreadcrumbs(fromPath: string, toPath: string): void {\n        const from = this.normalizePath(fromPath);\n        const to = this.normalizePath(toPath);\n        if (!from || !to) {\n            return;\n        }\n        const last = this.importBreadcrumbs[this.importBreadcrumbs.length - 1];\n        if (!last || last !== from) {\n            this.importBreadcrumbs = [from];\n        }\n        if (from === to) {\n            return;\n        }\n        if (this.importBreadcrumbs[this.importBreadcrumbs.length - 1] !== to) {\n            this.importBreadcrumbs.push(to);\n        }\n    }\n\n    private renderImportBreadcrumbs(path?: string): string {\n        if (!path || this.importBreadcrumbs.length < 2) {\n            return '';\n        }\n        const normalized = this.normalizePath(path);\n        const currentIndex = this.importBreadcrumbs.lastIndexOf(normalized);\n        if (currentIndex < 0) {\n            return '';\n        }\n        const crumbs = [...this.importBreadcrumbs];\n        const items = crumbs.map((crumbPath, index) => {\n            const label = this.escapeHtml(this.getBreadcrumbLabel(crumbPath));\n            const escapedPath = this.escapeHtml(crumbPath);\n            const isCurrent = index === currentIndex;\n            const currentAttr = isCurrent ? ' aria-current=\"page\"' : '';\n            const currentClass = isCurrent ? ' is-current' : '';\n            return `<button class=\"breadcrumb${currentClass}\" data-breadcrumb-path=\"${escapedPath}\"${currentAttr}>${label}</button>`;\n        });\n        return `\n            <nav class=\"code-breadcrumbs\" aria-label=\"Import trail\">\n                ${items.join('<span class=\"breadcrumb-sep\">&gt;</span>')}\n            </nav>\n        `;\n    }\n\n    private getBreadcrumbLabel(path: string): string {\n        const normalized = this.normalizePath(path);\n        const parts = normalized.split('/').filter(Boolean);\n        if (parts.length <= 2) {\n            return normalized;\n        }\n        return `.../${parts.slice(-2).join('/')}`;\n    }\n\n    private navigateBreadcrumb(path: string): void {\n        const normalized = this.normalizePath(path);\n        const index = this.importBreadcrumbs.lastIndexOf(normalized);\n        if (index < 0) {\n            this.importBreadcrumbs = [normalized];\n        }\n        const fileNode = this.fileNodesByPath.get(normalized);\n        if (!fileNode) {\n            this.setCodeStatus(`\"${normalized}\" is not indexed in this project.`);\n            return;\n        }\n        this.jumpToSymbol(fileNode);\n    }\n\n    private findJSImportBlocks(lines: string[]): Array<{ start: number; end: number; text: string }> {\n        const blocks: Array<{ start: number; end: number; text: string }> = [];\n        let inBlock = false;\n        let blockStart = 0;\n        let blockText = '';\n        lines.forEach((line, index) => {\n            const trimmed = line.trim();\n            if (!inBlock) {\n                if (!this.isJSImportStart(trimmed)) {\n                    return;\n                }\n                inBlock = true;\n                blockStart = index;\n                blockText = trimmed;\n                if (this.isJSImportComplete(blockText)) {\n                    blocks.push({ start: blockStart, end: index, text: blockText });\n                    inBlock = false;\n                    blockText = '';\n                }\n                return;\n            }\n            if (trimmed) {\n                blockText = blockText ? `${blockText} ${trimmed}` : trimmed;\n            }\n            if (this.isJSImportComplete(blockText)) {\n                blocks.push({ start: blockStart, end: index, text: blockText });\n                inBlock = false;\n                blockText = '';\n            }\n        });\n        if (inBlock) {\n            blocks.push({ start: blockStart, end: lines.length - 1, text: blockText });\n        }\n        return blocks;\n    }\n\n    private isJSImportStart(trimmed: string): boolean {\n        if (!trimmed) {\n            return false;\n        }\n        if (trimmed.startsWith('import(')) {\n            return false;\n        }\n        return /^import\\b/.test(trimmed) || /^export\\b/.test(trimmed);\n    }\n\n    private isJSImportComplete(statement: string): boolean {\n        const normalized = statement.replace(/\\s+/g, ' ').trim();\n        if (!normalized) {\n            return false;\n        }\n        if (/^export\\b/.test(normalized) && !/\\bfrom\\s+['\"][^'\"]+['\"]/.test(normalized)) {\n            return true;\n        }\n        if (/\\bfrom\\s+['\"][^'\"]+['\"]/.test(normalized)) {\n            return true;\n        }\n        if (/^import\\s+['\"][^'\"]+['\"]/.test(normalized)) {\n            return true;\n        }\n        if (/\\brequire\\s*\\(\\s*['\"][^'\"]+['\"]\\s*\\)/.test(normalized)) {\n            return true;\n        }\n        return normalized.endsWith(';');\n    }\n\n    private filterImportNamesForLine(lineText: string, importNames: string[]): string[] {\n        if (!lineText || importNames.length === 0) {\n            return [];\n        }\n        return importNames.filter((name) => {\n            const matcher = new RegExp(`\\\\b${this.escapeRegex(name)}\\\\b`);\n            return matcher.test(lineText);\n        });\n    }\n\n    private highlightImportUsage(importName: string): void {\n        if (!importName) {\n            return;\n        }\n        this.clearImportUsageHighlights();\n        const lines = Array.from(this.codeSurface.querySelectorAll<HTMLElement>('.code-line'));\n        let firstMatch: HTMLElement | null = null;\n        let matchCount = 0;\n        lines.forEach((line) => {\n            const imports = (line.dataset.imports || '').split(',').map((value) => value.trim());\n            if (imports.includes(importName)) {\n                return;\n            }\n            if (this.lineHasIdentifierUsage(line, importName)) {\n                line.classList.add('is-import-usage');\n                matchCount += 1;\n                if (!firstMatch) {\n                    firstMatch = line;\n                }\n            }\n        });\n        if (!firstMatch) {\n            this.setCodeStatus(`No usages of ${importName} in this snippet.`);\n            return;\n        }\n        this.setCodeStatus(`Found ${matchCount} usage${matchCount === 1 ? '' : 's'} of ${importName}.`);\n        firstMatch.scrollIntoView({ behavior: 'smooth', block: 'center' });\n    }\n\n    private handleImportJump(importName: string, lineEl?: HTMLElement | null): void {\n        const lineText = this.getLineTextForElement(lineEl ?? undefined);\n        const language = this.getHighlightLanguage(this.currentSymbol?.location?.path);\n        const currentPath = this.currentSymbol?.location?.path;\n        const statement = lineEl?.dataset.importStatement ?? lineText;\n        const target = this.resolveImportTarget(importName, statement, language, currentPath);\n        if (target) {\n            const definitionName = this.getImportDefinitionName(importName, statement, language);\n            this.navigateToSymbolDefinition(target, currentPath, definitionName);\n            return;\n        }\n        const sourceLabel = statement ? ` from \"${statement.trim()}\"` : '';\n        this.showImportModal(`\"${importName}\" is not defined in this project${sourceLabel}.`);\n    }\n\n    private getLineTextForElement(lineEl?: HTMLElement): string {\n        if (!lineEl) {\n            return '';\n        }\n        const lineNumber = Number(lineEl.dataset.line);\n        if (Number.isFinite(lineNumber) && this.currentSnippetText) {\n            const lines = this.currentSnippetText.replace(/\\n$/, '').split('\\n');\n            const index = lineNumber - this.currentSnippetStartLine;\n            if (index >= 0 && index < lines.length) {\n                return lines[index];\n            }\n        }\n        const textEl = lineEl.querySelector<HTMLElement>('.line-text');\n        return textEl?.textContent ?? '';\n    }\n\n    private resolveImportTarget(\n        importName: string,\n        lineText: string,\n        language?: string,\n        currentPath?: string,\n    ): SymbolNode | null {\n        const normalizedPath = currentPath ? this.normalizePath(currentPath) : '';\n        if (language === 'python') {\n            return this.resolvePythonImportTarget(importName, lineText, normalizedPath);\n        }\n        if (language === 'swift') {\n            return this.resolveSwiftImportTarget(importName, lineText);\n        }\n        if (language === 'javascript' || language === 'typescript' || language === 'tsx') {\n            return this.resolveJsImportTarget(importName, lineText, normalizedPath);\n        }\n        return null;\n    }\n\n    private resolvePythonImportTarget(importName: string, lineText: string, currentPath: string): SymbolNode | null {\n        const entry = this.parsePythonImportEntry(lineText, importName);\n        if (!entry) {\n            return null;\n        }\n        const candidates = this.resolvePythonModuleCandidates(entry.module, currentPath);\n        if (!entry.importedName) {\n            return this.findFileByCandidates(candidates);\n        }\n        const symbolName = entry.importedName ?? importName;\n        const symbol = this.findSymbolInFiles(symbolName, candidates);\n        if (symbol) {\n            return symbol;\n        }\n        const fileNode = this.findFileByCandidates(candidates);\n        if (fileNode) {\n            return fileNode;\n        }\n        if (entry.importedName) {\n            const extended = this.resolvePythonModuleCandidates(`${entry.module}.${entry.importedName}`, currentPath);\n            const extendedFile = this.findFileByCandidates(extended);\n            if (extendedFile) {\n                return extendedFile;\n            }\n        }\n        return null;\n    }\n\n    private resolveJsImportTarget(importName: string, lineText: string, currentPath: string): SymbolNode | null {\n        const info = this.parseJsImportEntry(lineText, importName);\n        if (!info || !info.source) {\n            return null;\n        }\n        if (!this.isRelativeImport(info.source)) {\n            return null;\n        }\n        const candidates = this.resolveJsModuleCandidates(info.source, currentPath);\n        if (candidates.length === 0) {\n            return null;\n        }\n        const importedName = info.importedName ?? importName;\n        const symbol = this.findSymbolInFiles(importedName, candidates);\n        if (symbol) {\n            return symbol;\n        }\n        return this.findFileByCandidates(candidates);\n    }\n\n    private resolveSwiftImportTarget(importName: string, lineText: string): SymbolNode | null {\n        const moduleName = this.parseSwiftImportModule(lineText);\n        if (!moduleName) {\n            return null;\n        }\n        const moduleFile = this.findSwiftModuleFile(moduleName);\n        if (moduleFile) {\n            return moduleFile;\n        }\n        if (moduleName !== importName) {\n            return this.findSwiftModuleFile(importName);\n        }\n        return null;\n    }\n\n    private parsePythonImportEntry(\n        lineText: string,\n        importName: string,\n    ): { module: string; importedName?: string } | null {\n        const trimmed = lineText.trim();\n        if (!trimmed || trimmed.startsWith('#')) {\n            return null;\n        }\n        if (trimmed.startsWith('import ')) {\n            const rest = trimmed.slice('import '.length);\n            const parts = rest.split(',');\n            for (const part of parts) {\n                const piece = part.trim();\n                if (!piece) {\n                    continue;\n                }\n                const segments = piece.split(/\\s+as\\s+/);\n                const modulePart = segments[0].trim();\n                const local = (segments[1] ?? modulePart).trim();\n                if (local === importName) {\n                    return { module: modulePart };\n                }\n            }\n            return null;\n        }\n        if (trimmed.startsWith('from ')) {\n            const match = trimmed.match(/^from\\s+(\\S+)\\s+import\\s+(.+)$/);\n            if (!match) {\n                return null;\n            }\n            const modulePart = match[1].trim();\n            const importPart = match[2].split('#')[0].trim();\n            const parts = importPart.split(',');\n            for (const part of parts) {\n                const piece = part.trim();\n                if (!piece || piece === '*') {\n                    continue;\n                }\n                const segments = piece.split(/\\s+as\\s+/);\n                const imported = segments[0].trim();\n                const local = (segments[1] ?? imported).trim();\n                if (local === importName) {\n                    return { module: modulePart, importedName: imported };\n                }\n            }\n        }\n        return null;\n    }\n\n    private getImportDefinitionName(importName: string, statement: string, language?: string): string | null {\n        if (!statement) {\n            return null;\n        }\n        if (language === 'python') {\n            const entry = this.parsePythonImportEntry(statement, importName);\n            return entry?.importedName ?? null;\n        }\n        if (language === 'javascript' || language === 'typescript' || language === 'tsx') {\n            const entry = this.parseJsImportEntry(statement, importName);\n            if (!entry) {\n                return null;\n            }\n            return entry.importedName ?? importName;\n        }\n        return null;\n    }\n\n    private parseJsImportEntry(\n        lineText: string,\n        importName: string,\n    ): { source: string; importedName?: string } | null {\n        const importMatch = lineText.match(/^import\\s+(?:type\\s+)?(.+?)\\s+from\\s+['\"]([^'\"]+)['\"]/);\n        const exportMatch = lineText.match(/^export\\s+(?:type\\s+)?(.+?)\\s+from\\s+['\"]([^'\"]+)['\"]/);\n        const match = importMatch ?? exportMatch;\n        if (match) {\n            const binding = match[1];\n            const source = match[2];\n            const nameMap = this.parseJsImportBindingsMap(binding);\n            if (nameMap.has(importName)) {\n                return { source, importedName: nameMap.get(importName) };\n            }\n            return { source };\n        }\n        const importEqualsMatch = lineText.match(/^import\\s+([A-Za-z_$][\\w$]*)\\s*=\\s*require\\s*\\(\\s*['\"]([^'\"]+)['\"]\\s*\\)/);\n        if (importEqualsMatch) {\n            const local = importEqualsMatch[1];\n            const source = importEqualsMatch[2];\n            if (local === importName) {\n                return { source, importedName: local };\n            }\n            return { source };\n        }\n        const requireMatch = lineText.match(/^(?:const|let|var)\\s+(.+?)\\s*=\\s*require\\s*\\(\\s*['\"]([^'\"]+)['\"]\\s*\\)/);\n        if (requireMatch) {\n            const binding = requireMatch[1];\n            const source = requireMatch[2];\n            const nameMap = this.parseJsRequireBindingMap(binding);\n            if (nameMap.has(importName)) {\n                return { source, importedName: nameMap.get(importName) };\n            }\n            return { source };\n        }\n        return null;\n    }\n\n    private parseSwiftImportModule(lineText: string): string | null {\n        const trimmed = lineText.trim();\n        if (!trimmed.startsWith('import ')) {\n            return null;\n        }\n        const rest = trimmed.slice('import '.length).trim();\n        const moduleName = rest.split(/\\s+/)[0];\n        return moduleName || null;\n    }\n\n    private parseJsImportBindingsMap(binding: string): Map<string, string> {\n        const map = new Map<string, string>();\n        const trimmed = binding.trim();\n        if (!trimmed) {\n            return map;\n        }\n        if (trimmed.startsWith('{')) {\n            this.fillBraceListMap(trimmed, map);\n            return map;\n        }\n        if (trimmed.startsWith('*')) {\n            const starMatch = trimmed.match(/\\*\\s+as\\s+([A-Za-z_$][\\w$]*)/);\n            if (starMatch) {\n                map.set(starMatch[1], starMatch[1]);\n            }\n            return map;\n        }\n        const parts = trimmed.split(',');\n        const defaultName = parts[0]?.trim();\n        if (defaultName) {\n            map.set(defaultName, defaultName);\n        }\n        if (parts.length > 1) {\n            const rest = parts.slice(1).join(',').trim();\n            if (rest.startsWith('{')) {\n                this.fillBraceListMap(rest, map);\n            } else if (rest.startsWith('*')) {\n                const starMatch = rest.match(/\\*\\s+as\\s+([A-Za-z_$][\\w$]*)/);\n                if (starMatch) {\n                    map.set(starMatch[1], starMatch[1]);\n                }\n            }\n        }\n        return map;\n    }\n\n    private parseJsRequireBindingMap(binding: string): Map<string, string> {\n        const map = new Map<string, string>();\n        const trimmed = binding.trim();\n        if (!trimmed) {\n            return map;\n        }\n        if (trimmed.startsWith('{')) {\n            this.fillBraceListMap(trimmed, map);\n            return map;\n        }\n        if (trimmed.startsWith('[')) {\n            return map;\n        }\n        const local = trimmed.split(/\\s+/)[0];\n        if (local) {\n            map.set(local, local);\n        }\n        return map;\n    }\n\n    private fillBraceListMap(segment: string, map: Map<string, string>): void {\n        const content = segment.replace(/^{/, '').replace(/}.*$/, '');\n        content.split(',')\n            .map((part) => part.trim())\n            .forEach((part) => {\n                if (!part) {\n                    return;\n                }\n                if (part.includes(' as ')) {\n                    const [imported, local] = part.split(/\\s+as\\s+/);\n                    if (local && imported) {\n                        map.set(local.trim(), imported.trim());\n                    }\n                    return;\n                }\n                if (part.includes(':')) {\n                    const [imported, local] = part.split(':');\n                    if (local && imported) {\n                        map.set(local.trim(), imported.trim());\n                    }\n                    return;\n                }\n                map.set(part, part);\n            });\n    }\n\n    private resolvePythonModuleCandidates(modulePath: string, currentPath: string): string[] {\n        if (!modulePath) {\n            return [];\n        }\n        const normalizedCurrent = currentPath ? this.normalizePath(currentPath) : '';\n        const baseDir = normalizedCurrent.split('/').slice(0, -1).join('/');\n        const relativeMatch = modulePath.match(/^(\\.+)(.*)$/);\n        let baseParts = baseDir ? baseDir.split('/').filter(Boolean) : [];\n        let remainder = modulePath;\n        if (relativeMatch) {\n            const dots = relativeMatch[1].length;\n            remainder = relativeMatch[2] || '';\n            for (let i = 1; i < dots; i += 1) {\n                baseParts = baseParts.slice(0, -1);\n            }\n        }\n        const moduleSuffix = remainder.replace(/^\\./, '');\n        const modulePathParts = moduleSuffix ? moduleSuffix.split('.').filter(Boolean) : [];\n        const joined = [...baseParts, ...modulePathParts].join('/');\n        if (!joined) {\n            return [];\n        }\n        return [`${joined}.py`, `${joined}/__init__.py`];\n    }\n\n    private resolveJsModuleCandidates(modulePath: string, currentPath: string): string[] {\n        const extensions = ['.js', '.jsx', '.ts', '.tsx', '.mjs', '.cjs'];\n        const normalizedCurrent = currentPath ? this.normalizePath(currentPath) : '';\n        const baseDir = normalizedCurrent.split('/').slice(0, -1).join('/');\n        const resolved = this.resolvePath(baseDir, modulePath);\n        if (!resolved) {\n            return [];\n        }\n        const hasExtension = extensions.some((ext) => resolved.endsWith(ext));\n        if (hasExtension) {\n            return [resolved];\n        }\n        const candidates = extensions.map((ext) => `${resolved}${ext}`);\n        extensions.forEach((ext) => candidates.push(`${resolved}/index${ext}`));\n        return candidates;\n    }\n\n    private isRelativeImport(modulePath: string): boolean {\n        return modulePath.startsWith('.') || modulePath.startsWith('/');\n    }\n\n    private resolvePath(baseDir: string, relative: string): string {\n        const cleaned = relative.startsWith('/') ? relative.slice(1) : relative;\n        const parts = [...(baseDir ? baseDir.split('/').filter(Boolean) : []), ...cleaned.split('/')];\n        const stack: string[] = [];\n        parts.forEach((part) => {\n            if (!part || part === '.') {\n                return;\n            }\n            if (part === '..') {\n                stack.pop();\n                return;\n            }\n            stack.push(part);\n        });\n        return stack.join('/');\n    }\n\n    private findSwiftModuleFile(moduleName: string): SymbolNode | null {\n        if (!moduleName) {\n            return null;\n        }\n        const target = `${moduleName}.swift`;\n        for (const [path, node] of this.fileNodesByPath.entries()) {\n            if (path.endsWith(`/${target}`) || path === target) {\n                return node;\n            }\n        }\n        return null;\n    }\n\n    private findSymbolInFiles(symbolName: string, candidates: string[]): SymbolNode | null {\n        if (!symbolName || candidates.length === 0) {\n            return null;\n        }\n        const candidateSet = new Set(candidates.map((path) => this.normalizePath(path)));\n        return this.graphNodes.find((node) => {\n            if (!node.location?.path || node.kind === 'external' || node.kind === 'folder') {\n                return false;\n            }\n            if (node.name !== symbolName) {\n                return false;\n            }\n            return candidateSet.has(this.normalizePath(node.location.path));\n        }) ?? null;\n    }\n\n    private findFileByCandidates(candidates: string[]): SymbolNode | null {\n        for (const candidate of candidates) {\n            const normalized = this.normalizePath(candidate);\n            const node = this.fileNodesByPath.get(normalized);\n            if (node) {\n                return node;\n            }\n        }\n        return null;\n    }\n\n    private jumpToSymbol(symbol: SymbolNode): void {\n        if (this.graphInstance) {\n            const fileNode = this.getFileNodeForSymbol(symbol);\n            const fileElement = fileNode ? this.graphInstance.$id(fileNode.id) : null;\n            const symbolElement = this.graphInstance.$id(symbol.id);\n            if (fileElement && !fileElement.empty()) {\n                this.graphInstance.$('node:selected').unselect();\n                fileElement.select();\n                if (symbolElement && !symbolElement.empty() && symbolElement.id() !== fileElement.id()) {\n                    symbolElement.select();\n                }\n            } else if (symbolElement && !symbolElement.empty()) {\n                this.graphInstance.$('node:selected').unselect();\n                symbolElement.select();\n            }\n        }\n        this.loadSymbolSnippet(symbol).catch(() => {\n            this.renderCode(symbol);\n            void this.updateNarrator(symbol);\n        });\n    }\n\n    private ensureImportModal(): void {\n        if (this.importModal) {\n            return;\n        }\n        const modal = document.createElement('div');\n        modal.className = 'import-modal';\n        modal.setAttribute('aria-hidden', 'true');\n        modal.innerHTML = `\n            <div class=\"import-modal__backdrop\" data-import-modal-close></div>\n            <div class=\"import-modal__dialog\" role=\"dialog\" aria-modal=\"true\" aria-label=\"Import lookup\">\n                <h3>Not in this project</h3>\n                <p class=\"import-modal__message\"></p>\n                <div class=\"import-modal__actions\">\n                    <button class=\"ghost-btn\" type=\"button\" data-import-modal-close>Close</button>\n                </div>\n            </div>\n        `;\n        modal.addEventListener('click', (event) => {\n            const target = event.target as HTMLElement;\n            if (target.closest('[data-import-modal-close]')) {\n                this.hideImportModal();\n            }\n        });\n        document.addEventListener('keydown', (event) => {\n            if (event.key === 'Escape') {\n                this.hideImportModal();\n            }\n        });\n        document.body.append(modal);\n        this.importModal = modal;\n        this.importModalMessage = modal.querySelector<HTMLElement>('.import-modal__message');\n    }\n\n    private showImportModal(message: string): void {\n        this.ensureImportModal();\n        if (this.importModalMessage) {\n            this.importModalMessage.textContent = message;\n        }\n        if (this.importModal) {\n            this.importModal.classList.add('is-visible');\n            this.importModal.setAttribute('aria-hidden', 'false');\n        }\n    }\n\n    private hideImportModal(): void {\n        if (!this.importModal) {\n            return;\n        }\n        this.importModal.classList.remove('is-visible');\n        this.importModal.setAttribute('aria-hidden', 'true');\n    }\n\n    private lineHasIdentifierUsage(lineEl: HTMLElement, importName: string): boolean {\n        const escaped = this.escapeRegex(importName);\n        const matcher = new RegExp(`\\\\b${escaped}\\\\b`);\n        const walker = document.createTreeWalker(lineEl, NodeFilter.SHOW_TEXT, {\n            acceptNode: (node) => {\n                if (!node.textContent || !matcher.test(node.textContent)) {\n                    matcher.lastIndex = 0;\n                    return NodeFilter.FILTER_REJECT;\n                }\n                matcher.lastIndex = 0;\n                const parent = node.parentElement;\n                if (!parent || parent.closest('.line-no')) {\n                    return NodeFilter.FILTER_REJECT;\n                }\n                if (parent.closest('.hljs-string') || parent.closest('.hljs-comment')) {\n                    return NodeFilter.FILTER_REJECT;\n                }\n                return NodeFilter.FILTER_ACCEPT;\n            },\n        });\n        while (walker.nextNode()) {\n            return true;\n        }\n        return false;\n    }\n\n    private applyFoldControls(symbol: SymbolNode): void {\n        if (symbol.kind !== 'file' || !symbol.location?.path) {\n            this.currentFoldRanges = new Map();\n            this.currentFoldPath = null;\n            return;\n        }\n        const path = this.normalizePath(symbol.location.path);\n        const ranges = this.getFoldableRangesForPath(path);\n        this.currentFoldRanges = new Map(ranges.map((range) => [range.id, range]));\n        this.currentFoldPath = path;\n        ranges.forEach((range) => {\n            const lineEl = this.codeSurface.querySelector<HTMLElement>(`[data-line=\"${range.start}\"]`);\n            if (!lineEl) {\n                return;\n            }\n            if (lineEl.dataset.foldId === range.id) {\n                return;\n            }\n            lineEl.dataset.foldId = range.id;\n            lineEl.dataset.foldEnd = String(range.end);\n            lineEl.classList.add('is-fold-start');\n            const lineNo = lineEl.querySelector<HTMLElement>('.line-no');\n            if (!lineNo) {\n                return;\n            }\n            const lineNumber = (lineEl.dataset.line ?? lineNo.textContent ?? '').trim();\n            lineNo.textContent = '';\n            const button = document.createElement('button');\n            button.type = 'button';\n            button.className = 'fold-toggle';\n            button.dataset.foldToggle = range.id;\n            button.setAttribute('aria-label', `Toggle ${range.kind} ${range.name}`);\n            button.textContent = this.foldedSymbolIds.has(range.id) ? '+' : '-';\n            const numberSpan = document.createElement('span');\n            numberSpan.className = 'line-num';\n            numberSpan.textContent = lineNumber;\n            lineNo.append(button, numberSpan);\n        });\n        this.refreshFoldVisibility();\n    }\n\n    private getFoldableRangesForPath(path: string): FoldRange[] {\n        const ranges: FoldRange[] = [];\n        this.graphNodes.forEach((node) => {\n            if (!node.location?.path || !node.location.start_line || !node.location.end_line) {\n                return;\n            }\n            if (node.kind !== 'function' && node.kind !== 'method' && node.kind !== 'class') {\n                return;\n            }\n            if (this.normalizePath(node.location.path) !== path) {\n                return;\n            }\n            const start = node.location.start_line;\n            const end = node.location.end_line;\n            if (end <= start) {\n                return;\n            }\n            ranges.push({\n                id: node.id,\n                name: node.name,\n                kind: node.kind,\n                start,\n                end,\n            });\n        });\n        ranges.sort((a, b) => a.start - b.start || b.end - a.end);\n        return ranges;\n    }\n\n    private refreshFoldVisibility(): void {\n        this.codeSurface.querySelectorAll<HTMLElement>('.code-line.is-folded')\n            .forEach((line) => line.classList.remove('is-folded'));\n        this.codeSurface.querySelectorAll<HTMLElement>('.code-line.is-fold-collapsed')\n            .forEach((line) => line.classList.remove('is-fold-collapsed'));\n        this.currentFoldRanges.forEach((range) => {\n            const isCollapsed = this.foldedSymbolIds.has(range.id);\n            const startLine = this.codeSurface.querySelector<HTMLElement>(`[data-line=\"${range.start}\"]`);\n            if (startLine) {\n                startLine.classList.toggle('is-fold-collapsed', isCollapsed);\n                const toggle = startLine.querySelector<HTMLButtonElement>('[data-fold-toggle]');\n                if (toggle) {\n                    toggle.textContent = isCollapsed ? '+' : '-';\n                }\n            }\n            if (!isCollapsed) {\n                return;\n            }\n            for (let line = range.start + 1; line <= range.end; line += 1) {\n                const lineEl = this.codeSurface.querySelector<HTMLElement>(`[data-line=\"${line}\"]`);\n                if (lineEl) {\n                    lineEl.classList.add('is-folded');\n                }\n            }\n        });\n    }\n\n    private toggleFold(foldId: string): void {\n        if (!this.currentFoldRanges.has(foldId)) {\n            return;\n        }\n        if (this.foldedSymbolIds.has(foldId)) {\n            this.foldedSymbolIds.delete(foldId);\n        } else {\n            this.foldedSymbolIds.add(foldId);\n        }\n        this.refreshFoldVisibility();\n    }\n\n    private handleDefinitionJump(event: MouseEvent, target: HTMLElement): boolean {\n        if (!this.isModifierClick(event)) {\n            return false;\n        }\n        if (!this.currentSymbol?.location?.path) {\n            return false;\n        }\n        const lineEl = target.closest<HTMLElement>('.code-line');\n        if (!lineEl) {\n            return false;\n        }\n        if (target.closest('.code-import')) {\n            return false;\n        }\n        const identifier = this.getIdentifierAtClick(event);\n        if (!identifier) {\n            return false;\n        }\n        const symbol = this.resolveDefinitionSymbol(identifier, this.currentSymbol.location.path);\n        if (!symbol) {\n            this.setCodeStatus(`No definition found for ${identifier}.`);\n            return true;\n        }\n        this.navigateToSymbolDefinition(symbol, this.currentSymbol.location.path);\n        return true;\n    }\n\n    private getIdentifierAtClick(event: MouseEvent): string | null {\n        const range = this.getCaretRangeFromPoint(event.clientX, event.clientY);\n        if (!range) {\n            return null;\n        }\n        const node = range.startContainer;\n        if (!node || node.nodeType !== Node.TEXT_NODE) {\n            return null;\n        }\n        const textNode = node as Text;\n        const parent = textNode.parentElement;\n        if (!parent || parent.closest('.line-no') || parent.closest('.hljs-string') || parent.closest('.hljs-comment')) {\n            return null;\n        }\n        const text = textNode.textContent ?? '';\n        if (!text) {\n            return null;\n        }\n        let offset = Math.min(range.startOffset, text.length);\n        const isWordChar = (char: string) => /[A-Za-z0-9_$]/.test(char);\n        if (offset > 0 && (!text[offset] || !isWordChar(text[offset])) && isWordChar(text[offset - 1])) {\n            offset -= 1;\n        }\n        if (!isWordChar(text[offset] ?? '')) {\n            return null;\n        }\n        let start = offset;\n        while (start > 0 && isWordChar(text[start - 1])) {\n            start -= 1;\n        }\n        let end = offset;\n        while (end < text.length && isWordChar(text[end])) {\n            end += 1;\n        }\n        const word = text.slice(start, end);\n        if (!word || !/^[A-Za-z_$][\\w$]*$/.test(word)) {\n            return null;\n        }\n        return word;\n    }\n\n    private getCaretRangeFromPoint(x: number, y: number): Range | null {\n        const doc = document as Document & {\n            caretRangeFromPoint?: (x: number, y: number) => Range | null;\n            caretPositionFromPoint?: (x: number, y: number) => { offsetNode: Node; offset: number } | null;\n        };\n        if (doc.caretRangeFromPoint) {\n            return doc.caretRangeFromPoint(x, y);\n        }\n        if (doc.caretPositionFromPoint) {\n            const position = doc.caretPositionFromPoint(x, y);\n            if (position) {\n                const range = document.createRange();\n                range.setStart(position.offsetNode, position.offset);\n                range.collapse(true);\n                return range;\n            }\n        }\n        return null;\n    }\n\n    private resolveDefinitionSymbol(identifier: string, currentPath: string): SymbolNode | null {\n        const normalizedCurrent = this.normalizePath(currentPath);\n        const kinds = new Set<SymbolKind>(['function', 'method', 'class']);\n        const matches = this.graphNodes.filter((node) => {\n            if (!node.location?.path) {\n                return false;\n            }\n            if (!kinds.has(node.kind)) {\n                return false;\n            }\n            return node.name === identifier;\n        });\n        if (matches.length === 0) {\n            return null;\n        }\n        const sameFile = matches.find((node) => this.normalizePath(node.location?.path ?? '') === normalizedCurrent);\n        if (sameFile) {\n            return sameFile;\n        }\n        return matches[0];\n    }\n\n    private navigateToSymbolDefinition(symbol: SymbolNode, fromPath?: string, preferredSymbolName?: string | null): void {\n        const fileNode = symbol.kind === 'file' ? symbol : this.getFileNodeForSymbol(symbol);\n        const sourcePath = fromPath ?? this.currentSymbol?.location?.path;\n        const targetPath = fileNode?.location?.path ?? symbol.location?.path;\n        if (sourcePath && targetPath) {\n            const normalizedSource = this.normalizePath(sourcePath);\n            const normalizedTarget = this.normalizePath(targetPath);\n            if (normalizedSource !== normalizedTarget) {\n                this.updateImportBreadcrumbs(normalizedSource, normalizedTarget);\n            }\n        }\n        if (fileNode && preferredSymbolName) {\n            const filePath = fileNode.location?.path ?? '';\n            const candidate = this.findSymbolInFiles(preferredSymbolName, [filePath]);\n            if (candidate) {\n                void this.highlightSymbolInFile(fileNode, candidate);\n                return;\n            }\n        }\n        if (fileNode && symbol.kind !== 'file') {\n            if (this.graphInstance) {\n                const fileElement = this.graphInstance.$id(fileNode.id);\n                const symbolElement = this.graphInstance.$id(symbol.id);\n                if (fileElement && !fileElement.empty()) {\n                    this.graphInstance.$('node:selected').unselect();\n                    fileElement.select();\n                    if (symbolElement && !symbolElement.empty() && symbolElement.id() !== fileElement.id()) {\n                        symbolElement.select();\n                    }\n                } else if (symbolElement && !symbolElement.empty()) {\n                    this.graphInstance.$('node:selected').unselect();\n                    symbolElement.select();\n                }\n            }\n            void this.highlightSymbolInFile(fileNode, symbol);\n            return;\n        }\n        this.jumpToSymbol(symbol);\n    }\n\n    private clearImportUsageHighlights(): void {\n        this.codeSurface.querySelectorAll<HTMLElement>('.code-line.is-import-usage')\n            .forEach((line) => line.classList.remove('is-import-usage'));\n    }\n\n    private extractImportNames(lineText: string, language?: string): string[] {\n        const trimmed = lineText.trim();\n        if (!trimmed) {\n            return [];\n        }\n        if (trimmed.startsWith('#') || trimmed.startsWith('//') || trimmed.startsWith('/*') || trimmed.startsWith('*')) {\n            return [];\n        }\n        if (language === 'python') {\n            return this.extractPythonImportNames(trimmed);\n        }\n        if (language === 'swift') {\n            return this.extractSwiftImportNames(trimmed);\n        }\n        if (language === 'javascript' || language === 'typescript' || language === 'tsx') {\n            return this.extractJsImportNames(trimmed);\n        }\n        return [];\n    }\n\n    private extractPythonImportNames(lineText: string): string[] {\n        if (lineText.startsWith('import ')) {\n            const rest = lineText.slice('import '.length);\n            return rest.split(',')\n                .map((part) => part.trim())\n                .map((part) => part.split(/\\s+as\\s+/).pop() ?? '')\n                .map((part) => part.trim())\n                .filter(Boolean);\n        }\n        if (lineText.startsWith('from ')) {\n            const match = lineText.match(/^from\\s+.+?\\s+import\\s+(.+)$/);\n            if (!match) {\n                return [];\n            }\n            const importPart = match[1];\n            if (importPart.includes('*')) {\n                return [];\n            }\n            return importPart.split(',')\n                .map((part) => part.trim())\n                .map((part) => part.split(/\\s+as\\s+/).pop() ?? '')\n                .map((part) => part.trim())\n                .filter(Boolean);\n        }\n        return [];\n    }\n\n    private extractSwiftImportNames(lineText: string): string[] {\n        if (!lineText.startsWith('import ')) {\n            return [];\n        }\n        const rest = lineText.slice('import '.length).trim();\n        const moduleName = rest.split(/\\s+/)[0];\n        return moduleName ? [moduleName] : [];\n    }\n\n    private extractJsImportNames(lineText: string): string[] {\n        const names: string[] = [];\n        const bindingMatch = lineText.match(/^import\\s+(?:type\\s+)?(.+?)\\s+from\\s+['\"]/);\n        if (bindingMatch) {\n            names.push(...this.parseJsImportBindings(bindingMatch[1]));\n        }\n        const exportMatch = lineText.match(/^export\\s+(?:type\\s+)?(.+?)\\s+from\\s+['\"]/);\n        if (exportMatch) {\n            names.push(...this.parseJsImportBindings(exportMatch[1]));\n        }\n        const importEqualsMatch = lineText.match(/^import\\s+([A-Za-z_$][\\w$]*)\\s*=\\s*require\\s*\\(/);\n        if (importEqualsMatch) {\n            names.push(importEqualsMatch[1]);\n        }\n        const requireMatch = lineText.match(/^(?:const|let|var)\\s+(.+?)\\s*=\\s*require\\s*\\(/);\n        if (requireMatch) {\n            names.push(...this.parseJsRequireBinding(requireMatch[1]));\n        }\n        return Array.from(new Set(names.filter(Boolean)));\n    }\n\n    private parseJsImportBindings(binding: string): string[] {\n        const names: string[] = [];\n        const trimmed = binding.trim();\n        if (!trimmed) {\n            return names;\n        }\n        if (trimmed.startsWith('{')) {\n            names.push(...this.parseBraceList(trimmed));\n            return names;\n        }\n        if (trimmed.startsWith('*')) {\n            const starMatch = trimmed.match(/\\*\\s+as\\s+([A-Za-z_$][\\w$]*)/);\n            if (starMatch) {\n                names.push(starMatch[1]);\n            }\n            return names;\n        }\n        const parts = trimmed.split(',');\n        if (parts.length > 0) {\n            const defaultName = parts[0].trim();\n            if (defaultName) {\n                names.push(defaultName);\n            }\n        }\n        if (parts.length > 1) {\n            const rest = parts.slice(1).join(',').trim();\n            if (rest.startsWith('{')) {\n                names.push(...this.parseBraceList(rest));\n            } else if (rest.startsWith('*')) {\n                const starMatch = rest.match(/\\*\\s+as\\s+([A-Za-z_$][\\w$]*)/);\n                if (starMatch) {\n                    names.push(starMatch[1]);\n                }\n            }\n        }\n        return names;\n    }\n\n    private parseJsRequireBinding(binding: string): string[] {\n        const trimmed = binding.trim();\n        if (trimmed.startsWith('{')) {\n            return this.parseBraceList(trimmed);\n        }\n        if (trimmed.startsWith('[')) {\n            return [];\n        }\n        return trimmed ? [trimmed.split(/\\s+/)[0]] : [];\n    }\n\n    private parseBraceList(segment: string): string[] {\n        const content = segment.replace(/^{/, '').replace(/}.*$/, '');\n        return content.split(',')\n            .map((part) => part.trim())\n            .map((part) => {\n                if (!part) {\n                    return '';\n                }\n                if (part.includes(' as ')) {\n                    return part.split(/\\s+as\\s+/).pop() ?? '';\n                }\n                if (part.includes(':')) {\n                    return part.split(':').pop() ?? '';\n                }\n                return part;\n            })\n            .map((part) => part.trim())\n            .filter((part) => /^[A-Za-z_$][\\w$]*$/.test(part));\n    }\n\n    private escapeRegex(value: string): string {\n        return value.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n    }\n\n    private getDisplayRange(\n        symbol: SymbolNode,\n        snippet?: SymbolSnippetResponse,\n    ): { startLine?: number; endLine?: number } {\n        if (snippet?.section === 'body' && snippet.start_line) {\n            return { startLine: snippet.start_line, endLine: snippet.end_line };\n        }\n        if ((symbol.kind === 'function' || symbol.kind === 'method' || symbol.kind === 'class') && symbol.location?.start_line) {\n            return {\n                startLine: symbol.location.start_line,\n                endLine: symbol.location.end_line || snippet?.end_line || symbol.location.start_line,\n            };\n        }\n        if (snippet?.start_line) {\n            return { startLine: snippet.start_line, endLine: snippet.end_line };\n        }\n        if (symbol.location?.start_line) {\n            return { startLine: symbol.location.start_line, endLine: symbol.location.end_line };\n        }\n        return {};\n    }\n\n    private renderSnippetLines(snippet?: SymbolSnippetResponse, language?: string): string {\n        const rawBody = snippet?.snippet ?? '';\n        const body = rawBody.trim().length > 0 ? rawBody : '# body not loaded yet';\n        const startLine = snippet?.start_line ?? 1;\n        const highlightSet = this.buildHighlightSet(snippet?.highlights ?? []);\n        const rendered = this.highlightSnippet(body, language);\n        const lines = rendered.replace(/\\n$/, '').split('\\n');\n        return lines\n            .map((line, index) => {\n                const lineNumber = startLine + index;\n                const isHighlighted = highlightSet.has(lineNumber);\n                const classes = isHighlighted ? 'code-line is-highlight' : 'code-line';\n                return `<span class=\"${classes}\" data-line=\"${lineNumber}\"><span class=\"line-no\">${lineNumber}</span><span class=\"line-text\">${line}</span></span>`;\n            })\n            .join('');\n    }\n\n    private buildHighlightSet(highlights: HighlightRange[]): Set<number> {\n        const highlightSet = new Set<number>();\n        highlights.forEach((range) => {\n            const start = Math.min(range.start_line, range.end_line);\n            const end = Math.max(range.start_line, range.end_line);\n            for (let line = start; line <= end; line += 1) {\n                highlightSet.add(line);\n            }\n        });\n        return highlightSet;\n    }\n\n    private renderGraph(nodes: SymbolNode[], edges: GraphEdge[]): void {\n        if (nodes.length === 0) {\n            this.clearGraph();\n            this.setCanvasOverlay('No nodes yet. Graph data has not loaded.', true);\n            return;\n        }\n        if (!this.graphInstance && typeof cytoscape !== 'function') {\n            this.setCanvasOverlay('Graph library not loaded.', true);\n            return;\n        }\n        this.displayNodeById = new Map(nodes.map((node) => [node.id, node]));\n        this.setCanvasOverlay('', false);\n        this.ensureGraph();\n        const selectedNodeId = this.getSelectedGraphNodeId();\n        const elements = this.buildGraphElements(nodes, edges);\n        this.graphInstance.elements().remove();\n        this.graphInstance.add(elements);\n        if (selectedNodeId) {\n            const selected = this.graphInstance.$id(selectedNodeId);\n            if (selected) {\n                selected.select();\n            }\n        }\n        this.runGraphLayout();\n        this.applyGraphFilters();\n    }\n\n    private ensureGraph(): void {\n        if (this.graphInstance) {\n            return;\n        }\n        this.graphInstance = cytoscape({\n            container: this.canvasGraph,\n            elements: [],\n            style: this.getGraphStyles(),\n            layout: { name: 'cose', animate: false, fit: true, padding: 24 },\n            minZoom: 0.2,\n            maxZoom: 2.5,\n            wheelSensitivity: 0.2,\n        });\n        this.bindGraphEvents();\n    }\n\n    private clearGraph(): void {\n        if (this.graphInstance) {\n            this.graphInstance.elements().remove();\n        }\n        this.hideGraphTooltip();\n    }\n\n    private bindGraphEvents(): void {\n        if (this.graphEventsBound || !this.graphInstance) {\n            return;\n        }\n        this.graphInstance.on('tap', 'node', (event: { target: { id: () => string; select: () => void }; originalEvent?: MouseEvent }) => {\n            const nodeId = event.target.id();\n            const node = this.displayNodeById.get(nodeId) ?? this.nodeById.get(nodeId);\n            if (!node) {\n                return;\n            }\n            const now = Date.now();\n            const isDoubleTap = this.lastTapNodeId === nodeId && (now - this.lastTapAt) < this.doubleTapDelay;\n            this.lastTapNodeId = nodeId;\n            this.lastTapAt = now;\n            if (this.tourActive) {\n                if (!this.isGuidedNodeAllowed(nodeId)) {\n                    this.flashGuidedMessage('Follow the guide to unlock this step.');\n                    return;\n                }\n                void this.advanceTour('jump', nodeId);\n                return;\n            }\n            if (this.graphLayoutMode === 'cluster' && isDoubleTap && this.handleClusterNodeToggle(node, event.originalEvent)) {\n                return;\n            }\n            if (this.graphLayoutMode === 'cluster' && this.handleClusterFolderSingleClick(node)) {\n                event.target.select();\n                return;\n            }\n            if (this.handleFileFocusClick(node, event.originalEvent)) {\n                return;\n            }\n            event.target.select();\n            this.loadSymbolSnippet(node).catch(() => {\n                this.renderCode(node);\n                void this.updateNarrator(node);\n            });\n        });\n        this.graphInstance.on('select', 'node', () => {\n            this.refreshEdgeHighlights();\n            this.updateLabelVisibility();\n        });\n        this.graphInstance.on('unselect', 'node', () => {\n            this.refreshEdgeHighlights();\n            this.updateLabelVisibility();\n        });\n        this.graphInstance.on('mouseover', 'node', (event: any) => {\n            const nodeId = event.target.id();\n            event.target.addClass('is-hovered');\n            this.setHoveredNode(nodeId);\n            this.showGraphTooltip(event.target, event);\n            this.updateLabelVisibility();\n        });\n        this.graphInstance.on('mouseout', 'node', (event: any) => {\n            event.target.removeClass('is-hovered');\n            this.setHoveredNode(null);\n            this.hideGraphTooltip();\n            this.updateLabelVisibility();\n        });\n        this.graphInstance.on('mousemove', 'node', (event: any) => {\n            this.updateTooltipPosition(event);\n        });\n        this.graphInstance.on('zoom', () => {\n            this.updateLabelVisibility();\n        });\n        this.graphEventsBound = true;\n    }\n\n    private buildGraphElements(nodes: SymbolNode[], edges: GraphEdge[]): Array<{ data: Record<string, unknown> }> {\n        const nodeElements = nodes.map((node) => {\n            const labelData = this.formatNodeLabel(node);\n            return {\n                data: {\n                    id: node.id,\n                    label: labelData.label,\n                    fullLabel: labelData.fullLabel,\n                    kindLabel: labelData.kindLabel,\n                    kind: node.kind,\n                    summary: node.summary || '',\n                    path: labelData.path,\n                    labelVisible: 'true',\n                },\n            };\n        });\n        const edgeElements = edges.map((edge, index) => ({\n            data: {\n                id: `edge:${edge.source}:${edge.target}:${edge.kind}:${index}`,\n                source: edge.source,\n                target: edge.target,\n                kind: edge.kind,\n                confidence: edge.confidence,\n            },\n        }));\n        return [...nodeElements, ...edgeElements];\n    }\n\n    private formatNodeLabel(node: SymbolNode): { label: string; fullLabel: string; path: string; kindLabel: string } {\n        const path = node.location?.path ?? '';\n        const fullLabel = node.name || path;\n        const displayName = this.getDisplayName(node, fullLabel, path);\n        const badge = this.getKindBadge(node.kind);\n        const kindLabel = this.getKindLabel(node.kind);\n        const label = this.wrapLabel(`[${badge}]`, displayName);\n        return { label, fullLabel, path, kindLabel };\n    }\n\n    private getDisplayName(node: SymbolNode, fullLabel: string, path: string): string {\n        if (node.kind === 'file') {\n            return this.getBasename(path || fullLabel);\n        }\n        if (node.kind === 'folder') {\n            return node.name || this.getBasename(path || fullLabel);\n        }\n        return fullLabel || node.name;\n    }\n\n    private getBasename(value: string): string {\n        const normalized = value.replace(/\\\\/g, '/');\n        const parts = normalized.split('/');\n        return parts.length > 0 ? parts[parts.length - 1] : value;\n    }\n\n    private wrapLabel(prefix: string, name: string): string {\n        const normalized = name.replace(/\\s+/g, ' ').trim();\n        if (!normalized) {\n            return prefix;\n        }\n        const lineLength = Math.max(8, this.labelLineLength);\n        const prefixText = prefix ? `${prefix} ` : '';\n        const firstLineLimit = Math.max(4, lineLength - prefixText.length);\n        const firstPart = normalized.slice(0, firstLineLimit);\n        let remaining = normalized.slice(firstPart.length).trimStart();\n        let label = `${prefixText}${firstPart}`;\n        if (remaining) {\n            let secondPart = remaining.slice(0, lineLength);\n            if (remaining.length > lineLength) {\n                const trimmed = secondPart.slice(0, Math.max(0, lineLength - 3));\n                secondPart = `${trimmed}...`;\n            }\n            label += `\\n${secondPart}`;\n        }\n        return label;\n    }\n\n    private getKindBadge(kind: SymbolKind): string {\n        switch (kind) {\n            case 'file':\n                return 'F';\n            case 'folder':\n                return 'dir';\n            case 'class':\n                return 'C';\n            case 'function':\n                return 'fn';\n            case 'method':\n                return 'm';\n            case 'blueprint':\n                return 'bp';\n            case 'external':\n                return 'ext';\n            default:\n                return 'id';\n        }\n    }\n\n    private getKindLabel(kind: SymbolKind): string {\n        switch (kind) {\n            case 'file':\n                return 'File';\n            case 'folder':\n                return 'Folder';\n            case 'class':\n                return 'Class';\n            case 'function':\n                return 'Function';\n            case 'method':\n                return 'Method';\n            case 'blueprint':\n                return 'Blueprint';\n            case 'external':\n                return 'External';\n            default:\n                return 'Symbol';\n        }\n    }\n\n    private getGraphStyles(): Array<Record<string, object>> {\n        return [\n            {\n                selector: 'node',\n                style: {\n                    'background-color': '#e9dfcf',\n                    'label': 'data(label)',\n                    'font-size': '12px',\n                    'font-family': 'Space Grotesk, sans-serif',\n                    'text-wrap': 'wrap',\n                    'text-max-width': '120px',\n                    'text-valign': 'center',\n                    'text-halign': 'center',\n                    'color': '#1e1914',\n                    'border-width': 1,\n                    'border-color': '#d2c2ad',\n                    'padding': '10px',\n                    'shape': 'round-rectangle',\n                },\n            },\n            {\n                selector: 'node[labelVisible = \"false\"]',\n                style: {\n                    'text-opacity': 0,\n                    'text-background-opacity': 0,\n                },\n            },\n            {\n                selector: 'node[kind = \"file\"]',\n                style: { 'background-color': '#f0dcc1' },\n            },\n            {\n                selector: 'node[kind = \"folder\"]',\n                style: { 'background-color': '#f5e6d6', 'border-style': 'dashed' },\n            },\n            {\n                selector: 'node[kind = \"class\"]',\n                style: { 'background-color': '#d9e8f0' },\n            },\n            {\n                selector: 'node[kind = \"function\"]',\n                style: { 'background-color': '#e3f0d9' },\n            },\n            {\n                selector: 'node[kind = \"method\"]',\n                style: { 'background-color': '#f0e3d9' },\n            },\n            {\n                selector: 'node[kind = \"blueprint\"]',\n                style: { 'background-color': '#d9efe7' },\n            },\n            {\n                selector: 'node[kind = \"external\"]',\n                style: { 'background-color': '#efe0f0', 'border-style': 'dashed' },\n            },\n            {\n                selector: 'node:selected',\n                style: {\n                    'border-width': 2,\n                    'border-color': '#237a78',\n                    'shadow-blur': 18,\n                    'shadow-color': '#237a78',\n                    'shadow-opacity': 0.5,\n                    'shadow-offset-x': 0,\n                    'shadow-offset-y': 0,\n                },\n            },\n            {\n                selector: 'node.is-hovered',\n                style: {\n                    'text-opacity': 1,\n                    'text-background-opacity': 1,\n                    'shadow-blur': 16,\n                    'shadow-color': '#237a78',\n                    'shadow-opacity': 0.45,\n                    'z-index': 10,\n                },\n            },\n            {\n                selector: 'node.is-guided-focus',\n                style: {\n                    'border-width': 3,\n                    'border-color': '#c75c2a',\n                    'shadow-blur': 22,\n                    'shadow-color': '#c75c2a',\n                    'shadow-opacity': 0.6,\n                    'z-index': 12,\n                },\n            },\n            {\n                selector: 'node.is-guided-hidden',\n                style: {\n                    'opacity': 0,\n                    'text-opacity': 0,\n                },\n            },\n            {\n                selector: 'edge',\n                style: {\n                    'line-color': '#bcae9c',\n                    'width': 1,\n                    'curve-style': 'unbundled-bezier',\n                    'control-point-distances': 40,\n                    'control-point-weights': 0.5,\n                    'target-arrow-shape': 'triangle',\n                    'target-arrow-color': '#bcae9c',\n                    'opacity': 0.2,\n                },\n            },\n            {\n                selector: 'edge.is-active',\n                style: {\n                    'opacity': 0.75,\n                    'width': 2,\n                },\n            },\n            {\n                selector: 'edge[kind = \"calls\"]',\n                style: { 'line-color': '#237a78', 'target-arrow-color': '#237a78' },\n            },\n            {\n                selector: 'edge[kind = \"imports\"]',\n                style: { 'line-color': '#d07838', 'target-arrow-color': '#d07838' },\n            },\n            {\n                selector: 'edge[kind = \"inherits\"]',\n                style: { 'line-color': '#7d6ba6', 'target-arrow-color': '#7d6ba6' },\n            },\n            {\n                selector: 'edge[kind = \"contains\"]',\n                style: { 'line-color': '#5c4d3c', 'target-arrow-color': '#5c4d3c' },\n            },\n            {\n                selector: 'edge[kind = \"blueprint\"]',\n                style: { 'line-color': '#2a9d8f', 'target-arrow-color': '#2a9d8f' },\n            },\n            {\n                selector: 'edge[confidence = \"low\"]',\n                style: { 'line-style': 'dashed', 'opacity': 0.15 },\n            },\n            {\n                selector: 'edge.is-guided-hidden',\n                style: { 'opacity': 0 },\n            },\n        ];\n    }\n\n    private refreshEdgeHighlights(): void {\n        if (!this.graphInstance) {\n            return;\n        }\n        const cy = this.graphInstance;\n        cy.edges().removeClass('is-active');\n        const selectedNodes = cy.$('node:selected');\n        selectedNodes.forEach((node: any) => {\n            node.connectedEdges().addClass('is-active');\n        });\n        if (this.hoveredNodeId) {\n            const hovered = cy.getElementById(this.hoveredNodeId);\n            if (hovered && !hovered.empty()) {\n                hovered.connectedEdges().addClass('is-active');\n            }\n        }\n    }\n\n    private updateLabelVisibility(): void {\n        if (!this.graphInstance) {\n            return;\n        }\n        const zoom = this.graphInstance.zoom();\n        const showAll = zoom >= this.labelZoomThreshold;\n        const guidedAllowed = this.tourActive && this.guidedAllowedNodeIds ? this.guidedAllowedNodeIds : null;\n        this.graphInstance.nodes().forEach((node: any) => {\n            const shouldShow = showAll\n                || node.selected()\n                || node.hasClass('is-hovered')\n                || (guidedAllowed ? guidedAllowed.has(node.id()) : false);\n            node.data('labelVisible', shouldShow ? 'true' : 'false');\n        });\n    }\n\n    private setHoveredNode(nodeId: string | null): void {\n        this.hoveredNodeId = nodeId;\n        this.refreshEdgeHighlights();\n    }\n\n    private showGraphTooltip(node: any, event: any): void {\n        if (!this.graphTooltip) {\n            return;\n        }\n        const fullLabel = node.data('fullLabel') || node.data('label');\n        const kindLabel = node.data('kindLabel') || node.data('kind');\n        const path = node.data('path');\n        const details = path ? `${kindLabel} - ${path}` : kindLabel;\n        this.graphTooltip.innerHTML = `\n            <div class=\"tooltip-title\">${this.escapeHtml(String(fullLabel))}</div>\n            <div class=\"tooltip-meta\">${this.escapeHtml(String(details))}</div>\n        `;\n        this.graphTooltip.setAttribute('aria-hidden', 'false');\n        this.graphTooltip.classList.add('is-visible');\n        this.updateTooltipPosition(event);\n    }\n\n    private hideGraphTooltip(): void {\n        if (!this.graphTooltip) {\n            return;\n        }\n        this.graphTooltip.classList.remove('is-visible');\n        this.graphTooltip.setAttribute('aria-hidden', 'true');\n    }\n\n    private updateTooltipPosition(event: any): void {\n        if (!this.graphTooltip || !this.canvasSurface) {\n            return;\n        }\n        const rendered = event.renderedPosition || event.position;\n        if (!rendered) {\n            return;\n        }\n        const offset = 12;\n        const surfaceRect = this.canvasSurface.getBoundingClientRect();\n        const x = Math.min(surfaceRect.width - 20, Math.max(0, rendered.x + offset));\n        const y = Math.min(surfaceRect.height - 20, Math.max(0, rendered.y + offset));\n        this.graphTooltip.style.transform = `translate(${x}px, ${y}px)`;\n    }\n\n    private runGraphLayout(): void {\n        if (!this.graphInstance) {\n            return;\n        }\n        const layout = this.graphInstance.layout(this.getLayoutOptions());\n        layout.run();\n        this.updateLabelVisibility();\n    }\n\n    private async updateNarrator(symbol: SymbolNode): Promise<void> {\n        if (symbol.kind === 'folder') {\n            this.renderFileTreeNarrator();\n            return;\n        }\n        const mode = this.currentMode;\n        const section = this.getSnippetSection(symbol);\n        const cacheKey = `${symbol.id}:${mode}:${section}`;\n        const cached = this.narratorCache.get(cacheKey);\n        if (cached) {\n            this.renderNarration(symbol, cached);\n            return;\n        }\n        const requestToken = ++this.narratorRequestToken;\n        this.renderNarratorLoading(symbol);\n        try {\n            const response = await this.fetchJson<NarrationResponse>(this.buildApiUrl('/gitreader/api/narrate'), {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                },\n                body: JSON.stringify({\n                    id: symbol.id,\n                    mode,\n                    section,\n                }),\n            });\n            if (requestToken !== this.narratorRequestToken) {\n                return;\n            }\n            if (!response || (response as unknown as { error?: object }).error) {\n                throw new Error('Narrator unavailable.');\n            }\n            this.narratorCache.set(cacheKey, response);\n            this.renderNarration(symbol, response);\n        } catch (error) {\n            if (requestToken !== this.narratorRequestToken) {\n                return;\n            }\n            const message = error instanceof Error ? error.message : 'Narrator unavailable.';\n            this.renderNarratorError(symbol, message);\n        }\n    }\n\n    private renderNarratorLoading(symbol: SymbolNode): void {\n        this.narratorOutput.innerHTML = `\n            <p class=\"eyebrow\">Narrator</p>\n            <h3>Listening to ${this.escapeHtml(symbol.name)}</h3>\n            <p>Drafting the next beat in the story.</p>\n        `;\n    }\n\n    private renderNarratorError(symbol: SymbolNode, message: string): void {\n        this.narratorOutput.innerHTML = `\n            <p class=\"eyebrow\">Narrator</p>\n            <h3>Unable to narrate ${this.escapeHtml(symbol.name)}</h3>\n            <p>${this.escapeHtml(message)}</p>\n        `;\n    }\n\n    private renderNarration(symbol: SymbolNode, narration: NarrationResponse): void {\n        const formatted = this.formatNarration(symbol, narration, this.currentMode);\n        this.narratorOutput.innerHTML = `\n            <p class=\"eyebrow\">${formatted.eyebrow}</p>\n            <h3>${formatted.title}</h3>\n            ${formatted.body}\n        `;\n    }\n\n    private formatNarration(\n        symbol: SymbolNode,\n        narration: NarrationResponse,\n        mode: NarrationMode,\n    ): { eyebrow: string; title: string; body: string } {\n        const name = this.escapeHtml(symbol.name);\n        if (mode === 'summary') {\n            const items = (narration.summary ?? []).map((item) => this.escapeHtml(item));\n            const body = items.length > 0\n                ? `<ul>${items.map((item) => `<li>${item}</li>`).join('')}</ul>`\n                : `<p>No summary yet for ${name}.</p>`;\n            return {\n                eyebrow: 'What it does',\n                title: `A clear role for ${name}`,\n                body,\n            };\n        }\n        if (mode === 'key_lines') {\n            const lines = narration.key_lines ?? [];\n            const body = lines.length > 0\n                ? `<ul>${lines.map((line) => {\n                    const label = `Line ${line.line}: ${line.text}`;\n                    return `<li>${this.escapeHtml(label)}</li>`;\n                }).join('')}</ul>`\n                : `<p>No key lines captured yet.</p>`;\n            return {\n                eyebrow: 'Key lines',\n                title: `Lines to watch in ${name}`,\n                body,\n            };\n        }\n        if (mode === 'connections') {\n            const items = (narration.connections ?? []).map((item) => this.escapeHtml(item));\n            const body = items.length > 0\n                ? `<ul>${items.map((item) => `<li>${item}</li>`).join('')}</ul>`\n                : `<p>Connections are still being mapped.</p>`;\n            return {\n                eyebrow: 'Connections',\n                title: `How ${name} links`,\n                body,\n            };\n        }\n        if (mode === 'next') {\n            const thread = narration.next_thread ? this.escapeHtml(narration.next_thread) : 'No next thread yet.';\n            return {\n                eyebrow: 'Next thread',\n                title: 'Where to go next',\n                body: `<p>${thread}</p>`,\n            };\n        }\n        const hook = narration.hook ? this.escapeHtml(narration.hook) : `A quiet setup around ${name}.`;\n        return {\n            eyebrow: 'Hook',\n            title: `The quiet setup behind ${name}`,\n            body: `<p>${hook}</p>`,\n        };\n    }\n\n    private renderStoryArc(arc: StoryArc): void {\n        const formatted = this.formatStoryArc(arc, this.currentMode);\n        this.narratorOutput.innerHTML = `\n            <p class=\"eyebrow\">${formatted.eyebrow}</p>\n            <h3>${formatted.title}</h3>\n            ${formatted.body}\n        `;\n    }\n\n    private renderStoryArcEmpty(): void {\n        this.narratorOutput.innerHTML = `\n            <p class=\"eyebrow\">Routes</p>\n            <h3>No route selected</h3>\n            <p>Pick a route to see its primary flow.</p>\n        `;\n    }\n\n    private renderStoryArcMissing(): void {\n        this.narratorOutput.innerHTML = `\n            <p class=\"eyebrow\">Routes</p>\n            <h3>Route not found</h3>\n            <p>Choose another route to continue.</p>\n        `;\n    }\n\n    private renderFileTreeNarrator(): void {\n        const fileCount = this.fileNodesByPath.size;\n        const countLabel = fileCount > 0 ? `${fileCount} files indexed.` : 'No files indexed yet.';\n        this.narratorOutput.innerHTML = `\n            <p class=\"eyebrow\">File tree</p>\n            <h3>Browse the repository layout</h3>\n            <p>Expand folders in the tree to explore the structure. ${this.escapeHtml(countLabel)}</p>\n        `;\n    }\n\n    private showReaderFileTreeForCurrent(): void {\n        const path = this.currentSymbol?.location?.path ?? this.readerTreeFocusPath;\n        if (!path) {\n            return;\n        }\n        this.renderReaderFileTree(path);\n        this.renderFileTree(path);\n        this.updateReaderControls();\n    }\n\n    private renderReaderFileTree(focusPath: string): void {\n        const normalized = this.normalizePath(focusPath);\n        if (!this.fileTreeRoot) {\n            this.fileTreeRoot = this.buildFileTreeFromNodes(this.graphNodes);\n        }\n        this.readerTreeFocusPath = normalized || null;\n        this.currentSymbol = null;\n        this.currentSnippetText = '';\n        this.currentSnippetStartLine = 1;\n        const treeHtml = this.buildFileTreeMarkup(normalized);\n        this.codeSurface.innerHTML = `\n            <article class=\"code-card\">\n                <div class=\"code-meta\">\n                    <span>FOLDER</span>\n                    <span>${this.escapeHtml(normalized || 'Repository')}</span>\n                </div>\n                <div class=\"code-actions\">\n                    <span class=\"code-status\">Folder contents</span>\n                </div>\n                <div class=\"file-tree\">${treeHtml}</div>\n            </article>\n        `;\n        this.updateReaderControls();\n    }\n\n    private formatStoryArc(arc: StoryArc, mode: NarrationMode): { eyebrow: string; title: string; body: string } {\n        const routeLabel = this.escapeHtml(this.formatArcTitle(arc));\n        const scenes = Array.isArray(arc.scenes) ? arc.scenes : [];\n        if (mode === 'summary') {\n            const entryNode = this.nodeById.get(arc.entry_id);\n            const summaryText = arc.summary ? this.escapeHtml(arc.summary) : '';\n            const metaItems = this.buildArcMetaItems(arc, entryNode);\n            const metaList = metaItems.length > 0\n                ? `<ul>${metaItems.map((item) => `<li>${this.escapeHtml(item)}</li>`).join('')}</ul>`\n                : '';\n            const items = scenes.map((scene, index) => {\n                const label = this.formatStorySceneLabel(scene, index, true);\n                return `<li>${this.escapeHtml(label)}</li>`;\n            });\n            const flowLabel = scenes.length > 1 ? 'Flow steps' : 'Flow steps (entry only)';\n            const flowList = items.length > 0\n                ? `<p>${flowLabel}</p><ol>${items.join('')}</ol>`\n                : '<p>No internal calls detected yet.</p>';\n            const body = `\n                ${summaryText ? `<p>${summaryText}</p>` : ''}\n                ${metaList}\n                ${flowList}\n            `;\n            return {\n                eyebrow: 'What it does',\n                title: `Primary flow for ${routeLabel}`,\n                body,\n            };\n        }\n        if (mode === 'key_lines') {\n            const items = scenes.map((scene) => {\n                const location = this.formatStorySceneLocation(scene);\n                const label = `${scene.name} - ${location}`;\n                return `<li>${this.escapeHtml(label)}</li>`;\n            });\n            const body = items.length > 0\n                ? `<ul>${items.join('')}</ul>`\n                : '<p>No locations captured yet.</p>';\n            return {\n                eyebrow: 'Key lines',\n                title: `Entry points for ${routeLabel}`,\n                body,\n            };\n        }\n        if (mode === 'connections') {\n            const connectionItems = this.buildArcConnectionItems(arc, scenes);\n            const body = connectionItems.length > 0\n                ? `<ul>${connectionItems.map((item) => `<li>${this.escapeHtml(item)}</li>`).join('')}</ul>`\n                : '<p>Connections are still being mapped.</p>';\n            return {\n                eyebrow: 'Connections',\n                title: `Files touched by ${routeLabel}`,\n                body,\n            };\n        }\n        if (mode === 'next') {\n            const related = arc.related_ids ?? [];\n            if (related.length > 0) {\n                const buttons = related.map((arcId) => {\n                    const target = this.storyArcsById.get(arcId);\n                    const label = target ? this.formatArcTitle(target) : arcId;\n                    return `<button class=\"ghost-btn arc-jump\" data-arc-id=\"${this.escapeHtml(arcId)}\">${this.escapeHtml(label)}</button>`;\n                });\n                return {\n                    eyebrow: 'Next thread',\n                    title: 'Where to go next',\n                    body: `<p>Jump to a related thread.</p><div class=\"arc-jump-list\">${buttons.join('')}</div>`,\n                };\n            }\n            const last = scenes[scenes.length - 1];\n            const location = last ? this.formatStorySceneLocation(last) : '';\n            const label = last\n                ? `Continue at ${last.name}${location ? ` (${location})` : ''}.`\n                : 'No next thread yet.';\n            return {\n                eyebrow: 'Next thread',\n                title: 'Where to go next',\n                body: `<p>${this.escapeHtml(label)}</p>`,\n            };\n        }\n        const handler = arc.route?.handler_name ? `Handler ${arc.route.handler_name}.` : '';\n        const summary = arc.summary ? arc.summary : `Route ${this.formatRouteLabel(arc)} begins the journey.`;\n        const hook = `${summary}${handler ? ` ${handler}` : ''}`.trim();\n        return {\n            eyebrow: 'Route',\n            title: routeLabel,\n            body: `<p>${this.escapeHtml(hook)}</p>`,\n        };\n    }\n\n    private formatStorySceneLabel(scene: StoryScene, index: number, includeLocation: boolean): string {\n        const roleLabel = scene.role === 'entry' ? 'Entry' : `Step ${index + 1}`;\n        const kindLabel = this.getKindLabel(scene.kind);\n        const confidence = scene.confidence === 'low' ? ' (low confidence)' : '';\n        const base = `${roleLabel}: ${scene.name} (${kindLabel})${confidence}`;\n        if (!includeLocation) {\n            return base;\n        }\n        const location = this.formatStorySceneLocation(scene);\n        return `${base} - ${location}`;\n    }\n\n    private formatStorySceneLocation(scene: StoryScene): string {\n        if (!scene.file_path) {\n            return 'location unknown';\n        }\n        if (scene.line && scene.line > 0) {\n            return `${scene.file_path}:${scene.line}`;\n        }\n        return scene.file_path;\n    }\n\n    private buildArcMetaItems(arc: StoryArc, entryNode?: SymbolNode): string[] {\n        const items: string[] = [];\n        const threadLabel = this.getArcThreadLabel(arc);\n        if (threadLabel) {\n            items.push(`Thread: ${threadLabel}`);\n        }\n        const methods = arc.route?.methods?.length ? arc.route.methods.join('|') : 'ANY';\n        const path = arc.route?.path ? arc.route.path : '';\n        const routeLabel = path ? `${methods} ${path}`.trim() : methods;\n        if (routeLabel) {\n            items.push(`Route: ${routeLabel}`);\n        }\n        if (arc.route?.handler_name) {\n            items.push(`Handler: ${arc.route.handler_name}`);\n        }\n        if (arc.route?.module) {\n            items.push(`Module: ${arc.route.module}`);\n        }\n        if (arc.route?.file_path) {\n            const line = arc.route.line ? `:${arc.route.line}` : '';\n            items.push(`Defined in: ${arc.route.file_path}${line}`);\n        }\n        if (entryNode?.signature) {\n            items.push(`Signature: ${entryNode.signature}`);\n        }\n        if (entryNode?.summary) {\n            items.push(`Docstring: ${entryNode.summary}`);\n        }\n        const steps = arc.scene_count || 0;\n        items.push(`Steps detected: ${steps}`);\n        const internalCalls = arc.calls?.internal ?? [];\n        if (internalCalls.length > 0) {\n            items.push(`Internal calls: ${internalCalls.slice(0, 4).join(', ')}`);\n        }\n        const externalCalls = arc.calls?.external ?? [];\n        if (externalCalls.length > 0) {\n            items.push(`External calls: ${externalCalls.slice(0, 4).join(', ')}`);\n        }\n        return items;\n    }\n\n    private buildArcConnectionItems(arc: StoryArc, scenes: StoryScene[]): string[] {\n        const items: string[] = [];\n        const internalCalls = arc.calls?.internal ?? [];\n        if (internalCalls.length > 0) {\n            items.push(`Internal calls: ${internalCalls.slice(0, 5).join(', ')}`);\n        }\n        const externalCalls = arc.calls?.external ?? [];\n        if (externalCalls.length > 0) {\n            items.push(`External calls: ${externalCalls.slice(0, 5).join(', ')}`);\n        }\n        const related = arc.related_ids ?? [];\n        if (related.length > 0) {\n            const labels = related.map((arcId) => {\n                const target = this.storyArcsById.get(arcId);\n                return target ? this.formatArcTitle(target) : arcId;\n            });\n            items.push(`Related threads: ${labels.join(', ')}`);\n        }\n        const paths = scenes\n            .map((scene) => scene.file_path)\n            .filter((path): path is string => Boolean(path));\n        const unique = Array.from(new Set(paths));\n        if (unique.length > 0) {\n            items.push(`Files: ${unique.slice(0, 6).join(', ')}`);\n        }\n        return items;\n    }\n\n    private getArcThreadLabel(arc: StoryArc): string {\n        if (!arc.thread || arc.thread === 'main') {\n            return '';\n        }\n        if (arc.thread === 'branch') {\n            const index = arc.thread_index ?? 0;\n            return `Branch ${index}`;\n        }\n        return arc.thread;\n    }\n\n    private formatArcTitle(arc: StoryArc): string {\n        const base = arc.title || this.formatRouteLabel(arc);\n        const threadLabel = this.getArcThreadLabel(arc);\n        if (!threadLabel) {\n            return base;\n        }\n        if (base.toLowerCase().includes('branch')) {\n            return base;\n        }\n        return `${base} (${threadLabel})`;\n    }\n\n    private setMode(mode: NarrationMode): void {\n        this.currentMode = mode;\n        this.modeButtons.forEach((button) => {\n            button.classList.toggle('is-active', button.dataset.mode === mode);\n        });\n        if (this.tourActive) {\n            if (this.tocMode === 'routes') {\n                if (this.activeStoryArc) {\n                    this.renderStoryArc(this.activeStoryArc);\n                } else {\n                    this.renderStoryArcEmpty();\n                }\n                return;\n            }\n            if (this.tocMode === 'tree') {\n                this.renderFileTreeNarrator();\n                return;\n            }\n            if (this.tourStep) {\n                this.renderTourStep(this.tourStep);\n                return;\n            }\n        }\n        if (this.activeStoryArc) {\n            this.renderStoryArc(this.activeStoryArc);\n            return;\n        }\n        const chapterId = this.getActiveChapterId();\n        const nodes = this.filterNodesForChapter(chapterId ?? '');\n        const selected = this.getSelectedGraphNode();\n        const focus = selected && selected.kind !== 'folder'\n            ? selected\n            : (this.currentSymbol ?? this.pickFocusNode(nodes));\n        void this.updateNarrator(focus);\n    }\n\n    private setLayout(layout: string): void {\n        this.workspace.dataset.layout = layout;\n        this.layoutButtons.forEach((button) => {\n            button.classList.toggle('is-active', button.dataset.layout === layout);\n        });\n        this.refreshGraphViewport();\n    }\n\n    private getActiveChapterId(): string | null {\n        const active = this.tocList.querySelector('.toc-item.is-active') as HTMLElement | null;\n        if (!active) {\n            return null;\n        }\n        return active.dataset.chapterId ?? null;\n    }\n\n    private getSelectedGraphNodeId(): string | null {\n        if (!this.graphInstance) {\n            return null;\n        }\n        const selected = this.graphInstance.$('node:selected');\n        if (!selected || selected.length === 0) {\n            return null;\n        }\n        return selected[0].id();\n    }\n\n    private getSelectedGraphNode(): SymbolNode | null {\n        const nodeId = this.getSelectedGraphNodeId();\n        if (!nodeId) {\n            return null;\n        }\n        return this.displayNodeById.get(nodeId) ?? this.nodeById.get(nodeId) ?? null;\n    }\n\n    private escapeHtml(value: string): string {\n        return value\n            .replace(/&/g, '&amp;')\n            .replace(/</g, '&lt;')\n            .replace(/>/g, '&gt;')\n            .replace(/\"/g, '&quot;')\n            .replace(/'/g, '&#39;');\n    }\n\n    private updateNarratorToggle(): void {\n        this.narratorToggle.classList.toggle('is-active', this.narratorVisible);\n        this.narratorToggle.setAttribute('aria-pressed', String(this.narratorVisible));\n        this.narratorToggle.textContent = this.narratorVisible ? 'Narrator' : 'Narrator Off';\n    }\n\n    private updateTourControls(): void {\n        document.body.classList.toggle('is-guided', this.tourActive);\n        this.tourControls.classList.toggle('is-active', this.tourActive);\n        this.tourStartButton.disabled = this.tourActive;\n        this.tourPrevButton.disabled = !this.tourActive;\n        this.tourNextButton.disabled = !this.tourActive;\n        this.tourEndButton.disabled = !this.tourActive;\n        const hasRoutes = this.storyArcs.length > 0;\n        if (this.tourActive) {\n            const allowRoutePicker = this.tocMode === 'routes';\n            this.routeSelect.disabled = !allowRoutePicker || !hasRoutes;\n            this.routeJump.disabled = !allowRoutePicker || !hasRoutes;\n        } else {\n            this.routeSelect.disabled = !hasRoutes;\n            this.routeJump.disabled = !hasRoutes;\n        }\n        if (this.tourState && this.tourStep) {\n            const total = this.tourStep.total_steps ?? 0;\n            const label = total > 0\n                ? `Step ${this.tourState.step_index + 1} of ${total}`\n                : `Step ${this.tourState.step_index + 1}`;\n            this.tourStatus.textContent = label;\n        } else {\n            this.tourStatus.textContent = '';\n        }\n        this.applyGuidedState();\n    }\n\n    private async startTour(): Promise<void> {\n        const arcId = this.getActiveTourArcId();\n        try {\n            const response = await this.fetchJson<TourResponse>(this.buildApiUrl('/gitreader/api/tour/start'), {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                },\n                body: JSON.stringify({\n                    mode: this.tourMode,\n                    arc_id: arcId || undefined,\n                }),\n            });\n            this.tourActive = true;\n            this.tourState = response.state;\n            this.tourStep = response.step;\n            this.renderTourStep(response.step);\n            this.updateTourControls();\n            await this.syncTourFocus(response.step);\n        } catch (error) {\n            const message = error instanceof Error ? error.message : 'Unable to start tour.';\n            this.renderTourError(message);\n        }\n    }\n\n    private async advanceTour(action: 'next' | 'prev' | 'jump' | 'branch', nodeId?: string, arcId?: string): Promise<void> {\n        if (!this.tourState) {\n            return;\n        }\n        try {\n            const response = await this.fetchJson<TourResponse>(this.buildApiUrl('/gitreader/api/tour/step'), {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                },\n                body: JSON.stringify({\n                    state: this.tourState,\n                    action,\n                    target_node_id: nodeId,\n                    target_arc_id: arcId,\n                }),\n            });\n            this.tourState = response.state;\n            this.tourStep = response.step;\n            this.renderTourStep(response.step);\n            this.updateTourControls();\n            await this.syncTourFocus(response.step);\n        } catch (error) {\n            const message = error instanceof Error ? error.message : 'Unable to advance tour.';\n            this.renderTourError(message);\n        }\n    }\n\n    private endTour(): void {\n        this.tourActive = false;\n        this.tourState = null;\n        this.tourStep = null;\n        this.guidedAllowedNodeIds = null;\n        this.updateTourControls();\n        if (this.activeStoryArc) {\n            this.renderStoryArc(this.activeStoryArc);\n            return;\n        }\n        if (this.currentSymbol) {\n            void this.updateNarrator(this.currentSymbol);\n            return;\n        }\n        this.renderStoryArcEmpty();\n    }\n\n    private getActiveTourArcId(): string | null {\n        if (this.activeStoryArc?.id) {\n            return this.activeStoryArc.id;\n        }\n        if (this.tocMode === 'routes' && this.currentChapterId) {\n            return this.currentChapterId;\n        }\n        if (this.routeSelect.value) {\n            return this.routeSelect.value;\n        }\n        return null;\n    }\n\n    private async syncTourFocus(step: TourStep): Promise<void> {\n        if (!step) {\n            return;\n        }\n        await this.loadGraphForScope('full');\n        const focus = step.focus;\n        const nodeId = step.node_id || focus?.node_id;\n        const node = nodeId ? this.nodeById.get(nodeId) ?? null : null;\n        const focusPath = focus?.file_path ? this.normalizePath(focus.file_path) : '';\n        const fileNode = focusPath ? this.fileNodesByPath.get(focusPath) ?? null : null;\n        const targetNode = node || fileNode;\n        if (!targetNode) {\n            return;\n        }\n        if (this.tourActive && (!this.graphInstance || this.graphInstance.$id(targetNode.id).empty())) {\n            const nodes = this.graphNodes;\n            const edges = this.filterEdgesForNodes(nodes);\n            const graphView: GraphView = {\n                nodes,\n                edges,\n                totalNodes: nodes.length,\n                visibleNodes: nodes.length,\n                isCapped: false,\n            };\n            this.renderGraph(graphView.nodes, graphView.edges);\n            this.updateGraphNodeStatus(graphView);\n        }\n        if (this.graphInstance) {\n            this.graphInstance.$('node:selected').unselect();\n            const element = this.graphInstance.$id(targetNode.id);\n            if (element && typeof element.select === 'function') {\n                element.select();\n            }\n        }\n        try {\n            await this.loadSymbolSnippet(targetNode, false);\n        } catch {\n            this.renderCode(targetNode);\n        }\n        if (focus?.start_line) {\n            this.jumpToLine(focus.start_line);\n        }\n    }\n\n    private handleContextLink(nodeId?: string, filePath?: string, line?: number): void {\n        if (nodeId) {\n            if (this.tourActive) {\n                if (!this.isGuidedNodeAllowed(nodeId)) {\n                    this.flashGuidedMessage('Follow the guide to unlock this step.');\n                    return;\n                }\n                void this.advanceTour('jump', nodeId);\n                return;\n            }\n            const node = this.nodeById.get(nodeId);\n            if (node) {\n                void this.loadSymbolSnippet(node, false).catch(() => {\n                    this.renderCode(node);\n                }).then(() => {\n                    if (line) {\n                        this.jumpToLine(line);\n                    }\n                });\n            }\n            return;\n        }\n\n        if (!filePath) {\n            return;\n        }\n        const normalized = this.normalizePath(filePath);\n        const fileNode = this.fileNodesByPath.get(normalized) ?? null;\n        if (fileNode) {\n            void this.loadSymbolSnippet(fileNode, false).catch(() => {\n                this.renderCode(fileNode);\n            }).then(() => {\n                if (line) {\n                    this.jumpToLine(line);\n                }\n            });\n            return;\n        }\n        if (line && this.currentSymbol?.location?.path && this.normalizePath(this.currentSymbol.location.path) === normalized) {\n            this.jumpToLine(line);\n        }\n    }\n\n    private flashGuidedMessage(message: string): void {\n        this.setCanvasOverlay(message, true);\n        window.setTimeout(() => this.setCanvasOverlay('', false), 1400);\n    }\n\n    private isGuidedNodeAllowed(nodeId: string): boolean {\n        if (!this.tourActive || !this.guidedAllowedNodeIds) {\n            return true;\n        }\n        return this.guidedAllowedNodeIds.has(nodeId);\n    }\n\n    private renderTourStep(step: TourStep): void {\n        const explanation = (step.explanation ?? []).map((item) => `<li>${this.escapeHtml(item)}</li>`).join('');\n        const relatedNodes = step.related_nodes ?? [];\n        const relatedNodeButtons = relatedNodes.map((item) => (\n            `<button class=\"ghost-btn arc-jump\" data-tour-node=\"${this.escapeHtml(item.node_id)}\">${this.escapeHtml(item.label)}</button>`\n        ));\n        const relatedArcs = step.related_arcs ?? [];\n        const relatedArcButtons = relatedArcs.map((item) => (\n            `<button class=\"ghost-btn arc-jump\" data-tour-arc=\"${this.escapeHtml(item.arc_id)}\">${this.escapeHtml(item.title)}</button>`\n        ));\n        const concept = step.concept ? `<p><strong>Concept:</strong> ${this.escapeHtml(step.concept)}</p>` : '';\n        const whyHere = step.why_here ? `<p><strong>Why here:</strong> ${this.escapeHtml(step.why_here)}</p>` : '';\n        const remember = step.remember ? `<p><strong>Remember:</strong> ${this.escapeHtml(step.remember)}</p>` : '';\n        const focus = step.focus?.file_path ? (() => {\n            const start = step.focus?.start_line;\n            const end = step.focus?.end_line;\n            const range = start ? `${start}${end && end !== start ? `-${end}` : ''}` : '';\n            return `<p class=\"tour-focus\">Focus: ${this.escapeHtml(step.focus.file_path)}${range ? `:${range}` : ''}</p>`;\n        })() : '';\n        const pitfall = step.pitfall ? `<p class=\"tour-pitfall\">${this.escapeHtml(step.pitfall)}</p>` : '';\n        const contextLinks = step.context_links ?? [];\n        const contextButtons = contextLinks.map((link) => {\n            const attrs = [\n                'data-context-link',\n                link.node_id ? `data-context-node=\"${this.escapeHtml(link.node_id)}\"` : '',\n                link.file_path ? `data-context-file=\"${this.escapeHtml(link.file_path)}\"` : '',\n                typeof link.line === 'number' ? `data-context-line=\"${link.line}\"` : '',\n            ].filter(Boolean).join(' ');\n            return `<button class=\"ghost-btn context-link\" ${attrs}>${this.escapeHtml(link.label)}</button>`;\n        });\n        const storySoFarItems = (step.story_so_far ?? []).map((item) => `<li>${this.escapeHtml(item)}</li>`).join('');\n        const storySoFar = storySoFarItems\n            ? `<div class=\"tour-story\"><p class=\"eyebrow\">Story so far</p><ul>${storySoFarItems}</ul></div>`\n            : '';\n        this.narratorOutput.innerHTML = `\n            <p class=\"eyebrow\">Tour: ${this.escapeHtml(this.tourMode)}</p>\n            <h3>${this.escapeHtml(step.title)}</h3>\n            <p>${this.escapeHtml(step.hook)}</p>\n            ${focus}\n            ${concept}\n            ${whyHere}\n            ${remember}\n            ${explanation ? `<ul>${explanation}</ul>` : ''}\n            <p><strong>Why it matters:</strong> ${this.escapeHtml(step.why_it_matters)}</p>\n            <p><strong>Next:</strong> ${this.escapeHtml(step.next_click)}</p>\n            ${pitfall}\n            ${contextButtons.length > 0 ? `<div class=\"context-link-list\">${contextButtons.join('')}</div>` : ''}\n            ${storySoFar}\n            ${relatedNodeButtons.length > 0 || relatedArcButtons.length > 0 ? `\n                <div class=\"arc-jump-list\">\n                    ${relatedNodeButtons.join('')}\n                    ${relatedArcButtons.join('')}\n                </div>\n            ` : ''}\n        `;\n    }\n\n    private renderTourError(message: string): void {\n        this.narratorOutput.innerHTML = `\n            <p class=\"eyebrow\">Tour</p>\n            <h3>Tour unavailable</h3>\n            <p>${this.escapeHtml(message)}</p>\n        `;\n    }\n\n    private applyGuidedState(): void {\n        if (!this.tourActive || !this.tourStep) {\n            this.guidedAllowedNodeIds = null;\n            this.applyGuidedToc();\n            this.applyGuidedCodeFocus();\n            this.applyGraphFilters();\n            this.renderFileTree(null);\n            return;\n        }\n        const allowed = new Set(this.tourStep.allowed_node_ids ?? []);\n        const focusPath = this.tourStep.focus?.file_path;\n        if (focusPath) {\n            const normalized = this.normalizePath(focusPath);\n            const fileNode = this.fileNodesByPath.get(normalized);\n            if (fileNode) {\n                allowed.add(fileNode.id);\n            }\n        }\n        this.guidedAllowedNodeIds = allowed.size > 0 ? allowed : null;\n        this.applyGuidedToc();\n        this.applyGraphFilters();\n        this.applyGuidedCodeFocus();\n        this.renderFileTree(this.tourStep.focus?.file_path ?? null);\n    }\n\n    private applyGuidedToc(): void {\n        const items = Array.from(this.tocList.querySelectorAll<HTMLElement>('.toc-item'));\n        if (!this.tourActive || !this.tourStep || this.tocMode !== 'story') {\n            items.forEach((item) => item.classList.remove('is-guided-hidden'));\n            return;\n        }\n        items.forEach((item) => {\n            const isActive = item.dataset.chapterId === this.currentChapterId;\n            item.classList.toggle('is-guided-hidden', !isActive);\n        });\n    }\n\n    private applyGuidedGraphFilter(): void {\n        if (!this.graphInstance) {\n            return;\n        }\n        const cy = this.graphInstance;\n        cy.elements().removeClass('is-guided-hidden');\n        cy.nodes().removeClass('is-guided-focus');\n        if (!this.tourActive || !this.guidedAllowedNodeIds || !this.tourStep) {\n            return;\n        }\n        const allowed = this.guidedAllowedNodeIds;\n        cy.nodes().forEach((node: any) => {\n            const isAllowed = allowed.has(node.id());\n            node.toggleClass('is-guided-hidden', !isAllowed);\n            node.toggleClass('is-guided-focus', node.id() === this.tourStep?.node_id);\n        });\n        cy.edges().forEach((edge: any) => {\n            const sourceId = edge.data('source');\n            const targetId = edge.data('target');\n            const isAllowed = allowed.has(sourceId) && allowed.has(targetId);\n            edge.toggleClass('is-guided-hidden', !isAllowed);\n        });\n        cy.elements('.is-guided-hidden').hide();\n    }\n\n    private applyGuidedCodeFocus(): void {\n        const lines = Array.from(this.codeSurface.querySelectorAll<HTMLElement>('.code-line'));\n        lines.forEach((line) => line.classList.remove('is-guided-dim', 'is-guided-focus'));\n        if (!this.tourActive || !this.tourStep?.focus) {\n            return;\n        }\n        const focus = this.tourStep.focus;\n        if (!focus?.start_line) {\n            return;\n        }\n        if (focus.file_path && this.currentSymbol?.location?.path) {\n            const currentPath = this.normalizePath(this.currentSymbol.location.path);\n            const focusPath = this.normalizePath(focus.file_path);\n            if (currentPath !== focusPath) {\n                return;\n            }\n        }\n        const start = focus.start_line;\n        const end = focus.end_line && focus.end_line >= start ? focus.end_line : start;\n        lines.forEach((line) => {\n            const lineNumber = Number(line.dataset.line);\n            if (!Number.isFinite(lineNumber)) {\n                return;\n            }\n            if (lineNumber >= start && lineNumber <= end) {\n                line.classList.add('is-guided-focus');\n            } else {\n                line.classList.add('is-guided-dim');\n            }\n        });\n    }\n\n    private setCanvasOverlay(message: string, visible: boolean): void {\n        this.canvasOverlay.textContent = message;\n        this.canvasOverlay.classList.toggle('is-visible', visible);\n    }\n\n    private refreshGraphViewport(): void {\n        if (!this.graphInstance) {\n            return;\n        }\n        this.graphInstance.resize();\n        this.graphInstance.fit();\n        this.updateLabelVisibility();\n    }\n\n    private hasHighlightSupport(): boolean {\n        return typeof hljs !== 'undefined' && typeof hljs.highlight === 'function';\n    }\n\n    private highlightSnippet(body: string, language?: string): string {\n        if (!this.hasHighlightSupport()) {\n            return this.escapeHtml(body);\n        }\n        if (language && hljs.getLanguage && hljs.getLanguage(language)) {\n            return hljs.highlight(body, { language }).value;\n        }\n        return hljs.highlightAuto(body).value;\n    }\n\n    private getHighlightLanguage(path?: string): string | undefined {\n        if (!path) {\n            return undefined;\n        }\n        const lower = path.toLowerCase();\n        if (lower.endsWith('.py')) {\n            return 'python';\n        }\n        if (lower.endsWith('.js') || lower.endsWith('.jsx')) {\n            return 'javascript';\n        }\n        if (lower.endsWith('.ts')) {\n            return 'typescript';\n        }\n        if (lower.endsWith('.tsx')) {\n            return 'tsx';\n        }\n        if (lower.endsWith('.swift')) {\n            return 'swift';\n        }\n        return undefined;\n    }\n\n    private async setSnippetMode(mode: SnippetMode): Promise<void> {\n        if (this.snippetMode === mode && !this.readerTreeFocusPath) {\n            return;\n        }\n        this.snippetMode = mode;\n        this.snippetCache.clear();\n        this.updateSnippetModeUi();\n        if (this.readerTreeFocusPath) {\n            this.readerTreeFocusPath = null;\n            if (this.pendingSymbol) {\n                this.renderCode(this.pendingSymbol, this.pendingSnippet ?? undefined);\n                return;\n            }\n        }\n        if (this.currentSymbol) {\n            const narrate = !this.activeStoryArc && !this.tourActive;\n            await this.loadSymbolSnippet(this.currentSymbol, narrate);\n            if (this.activeStoryArc) {\n                this.renderStoryArc(this.activeStoryArc);\n            } else if (this.tourActive && this.tourStep) {\n                this.renderTourStep(this.tourStep);\n            }\n        }\n    }\n\n    private updateSnippetModeUi(): void {\n        this.snippetModeButtons.forEach((button) => {\n            button.classList.toggle('is-active', button.dataset.snippetMode === this.snippetMode);\n        });\n    }\n\n    private updateReaderControls(): void {\n        if (!this.readerFileTreeButton) {\n            return;\n        }\n        const isFileTree = Boolean(this.readerTreeFocusPath);\n        this.readerFileTreeButton.classList.toggle('is-active', isFileTree);\n        if (isFileTree) {\n            this.snippetModeButtons.forEach((button) => button.classList.remove('is-active'));\n        } else {\n            this.updateSnippetModeUi();\n        }\n    }\n\n    private copySnippet(): void {\n        const text = this.currentSnippetText;\n        if (!text) {\n            this.setCodeStatus('Nothing to copy.');\n            return;\n        }\n        if (navigator.clipboard && navigator.clipboard.writeText) {\n            navigator.clipboard.writeText(text)\n                .then(() => this.setCodeStatus('Snippet copied.'))\n                .catch(() => this.setCodeStatus('Copy failed.'));\n            return;\n        }\n        this.setCodeStatus('Copy not supported.');\n    }\n\n    private jumpToInputLine(): void {\n        const input = this.codeSurface.querySelector<HTMLInputElement>('[data-line-input]');\n        if (!input) {\n            return;\n        }\n        const value = Number(input.value);\n        if (!Number.isFinite(value) || value <= 0) {\n            this.setCodeStatus('Enter a valid line number.');\n            return;\n        }\n        this.jumpToLine(value);\n    }\n\n    private jumpToLine(line: number): void {\n        const lineEl = this.codeSurface.querySelector<HTMLElement>(`[data-line=\"${line}\"]`);\n        if (!lineEl) {\n            this.setCodeStatus('Line not in snippet.');\n            return;\n        }\n        this.setCodeStatus('');\n        lineEl.classList.add('is-jump');\n        lineEl.scrollIntoView({ behavior: 'smooth', block: 'center' });\n        window.setTimeout(() => lineEl.classList.remove('is-jump'), 1200);\n    }\n\n    private setCodeStatus(message: string): void {\n        const status = this.codeSurface.querySelector<HTMLElement>('[data-code-status]');\n        if (status) {\n            status.textContent = message;\n        }\n    }\n\n    private loadGraphPreferences(): void {\n        const storedLayout = window.localStorage.getItem('gitreader.graphLayoutMode') as GraphLayoutMode | null;\n        if (storedLayout && ['cluster', 'layer', 'free'].includes(storedLayout)) {\n            this.graphLayoutMode = storedLayout;\n        }\n    }\n\n    private setGraphLayoutMode(mode: GraphLayoutMode): void {\n        if (this.graphLayoutMode === mode) {\n            return;\n        }\n        const wasCluster = this.graphLayoutMode === 'cluster';\n        this.graphLayoutMode = mode;\n        window.localStorage.setItem('gitreader.graphLayoutMode', mode);\n        this.updateGraphControls();\n        if (wasCluster || mode === 'cluster') {\n            this.refreshGraphView();\n            return;\n        }\n        this.runGraphLayout();\n    }\n\n    private toggleEdgeFilter(filter: EdgeKind): void {\n        if (this.edgeFilters.has(filter)) {\n            this.edgeFilters.delete(filter);\n        } else {\n            this.edgeFilters.add(filter);\n        }\n        this.updateGraphControls();\n        this.applyGraphFilters();\n    }\n\n    private applyGraphFilters(): void {\n        if (!this.graphInstance) {\n            return;\n        }\n        const cy = this.graphInstance;\n        cy.elements().show();\n        if (!this.showExternalNodes) {\n            cy.nodes().filter('[kind = \"external\"]').hide();\n        }\n        cy.edges().forEach((edge: { data: (key: string) => EdgeKind; hide: () => void }) => {\n            if (!this.edgeFilters.has(edge.data('kind'))) {\n                edge.hide();\n            }\n        });\n        cy.edges().forEach((edge: any) => {\n            if (edge.source().hidden() || edge.target().hidden()) {\n                edge.hide();\n            }\n        });\n        this.applyGuidedGraphFilter();\n        this.applyFocus();\n        this.refreshEdgeHighlights();\n        this.updateLabelVisibility();\n    }\n\n    private focusOnSelected(): void {\n        if (!this.graphInstance) {\n            return;\n        }\n        const selected = this.graphInstance.$('node:selected');\n        if (!selected || selected.length === 0) {\n            this.setCanvasOverlay('Select a node to focus.', true);\n            window.setTimeout(() => this.setCanvasOverlay('', false), 1200);\n            return;\n        }\n        this.focusedNodeId = selected[0].id();\n        this.applyGraphFilters();\n    }\n\n    private resetGraphFocus(): void {\n        this.focusedNodeId = null;\n        this.applyGraphFilters();\n        this.refreshGraphViewport();\n    }\n\n    private applyFocus(): void {\n        if (!this.graphInstance || !this.focusedNodeId || this.tourActive) {\n            return;\n        }\n        const cy = this.graphInstance;\n        const node = cy.getElementById(this.focusedNodeId);\n        if (!node || node.empty() || node.hidden()) {\n            this.focusedNodeId = null;\n            return;\n        }\n        const visible = cy.elements(':visible');\n        const focusElements = node.closedNeighborhood().intersection(visible);\n        visible.not(focusElements).hide();\n        cy.fit(focusElements, 40);\n    }\n\n    private zoomGraph(factor: number): void {\n        if (!this.graphInstance) {\n            return;\n        }\n        const current = this.graphInstance.zoom();\n        const next = Math.min(2.5, Math.max(0.2, current * factor));\n        const rect = this.canvasGraph.getBoundingClientRect();\n        this.graphInstance.zoom({\n            level: next,\n            renderedPosition: {\n                x: rect.width / 2,\n                y: rect.height / 2,\n            },\n        });\n        this.updateLabelVisibility();\n    }\n\n    private fitGraph(): void {\n        if (!this.graphInstance) {\n            return;\n        }\n        this.graphInstance.fit(undefined, 40);\n        this.updateLabelVisibility();\n    }\n\n    private updateGraphControls(): void {\n        this.graphLayoutButtons.forEach((button) => {\n            button.classList.toggle('is-active', button.dataset.layoutAction === this.graphLayoutMode);\n        });\n        this.edgeFilterButtons.forEach((button) => {\n            const filter = button.dataset.edgeFilter as EdgeKind | undefined;\n            if (!filter) {\n                return;\n            }\n            button.classList.toggle('is-active', this.edgeFilters.has(filter));\n        });\n        this.nodeFilterButtons.forEach((button) => {\n            if (button.dataset.nodeFilter === 'external') {\n                button.classList.toggle('is-active', this.showExternalNodes);\n            }\n        });\n    }\n\n    private getLayoutOptions(): {\n        name: string;\n        animate: boolean;\n        fit: boolean;\n        padding: number;\n        directed?: boolean;\n        spacingFactor?: number;\n        avoidOverlap?: boolean;\n        avoidOverlapPadding?: number;\n        nodeDimensionsIncludeLabels?: boolean;\n    } {\n        if (this.graphLayoutMode === 'layer') {\n            return {\n                name: 'breadthfirst',\n                animate: false,\n                fit: true,\n                padding: 36,\n                directed: true,\n                spacingFactor: 1.35,\n                avoidOverlap: true,\n                avoidOverlapPadding: 24,\n                nodeDimensionsIncludeLabels: true,\n            };\n        }\n        if (this.graphLayoutMode === 'free') {\n            return {\n                name: 'preset',\n                animate: false,\n                fit: true,\n                padding: 24,\n            };\n        }\n        return {\n            name: 'cose',\n            animate: false,\n            fit: true,\n            padding: 24,\n        };\n    }\n}\n\ndocument.addEventListener('DOMContentLoaded', () => {\n    const app = new GitReaderApp();\n    app.init();\n});\n"],
  "mappings": "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",
  "names": ["folderId", "_a", "label", "_b"]
}
